(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW;b=a.Chad=a.Chad||{};c=b.Web=b.Web||{};d=c.Presentation=c.Presentation||{};e=c.ClientExtensions=c.ClientExtensions||{};f=e.SweetAlert=e.SweetAlert||{};g=a.StartupCode$Chad_Web$ClientExtensions=a.StartupCode$Chad_Web$ClientExtensions||{};h=c.Bs=c.Bs||{};i=a.StartupCode$Chad_Web$Bootstrap=a.StartupCode$Chad_Web$Bootstrap||{};j=c.JQueryPieProgressOptions=c.JQueryPieProgressOptions||{};k=b.NLU=b.NLU||{};l=k.Witai=k.Witai||{};m=l.Utterance=l.Utterance||{};n=l.Intent=l.Intent||{};o=l.Entity=l.Entity||{};p=l.Trait=l.Trait||{};q=l["Utterance'"]=l["Utterance'"]||{};r=l["Value'"]=l["Value'"]||{};s=c.BabelNet=c.BabelNet||{};t=s.DisambiguateApiResponse=s.DisambiguateApiResponse||{};u=s.TokenFragment=s.TokenFragment||{};v=s.CharFragment=s.CharFragment||{};w=c.NLG=c.NLG||{};x=a.StartupCode$Chad_Web$NLG=a.StartupCode$Chad_Web$NLG||{};y=c.NLU=c.NLU||{};z=y.Intent=y.Intent||{};A=y.Trait=y.Trait||{};B=y.Entity=y.Entity||{};C=y.Utterance=y.Utterance||{};D=y.Voice=y.Voice||{};E=D["Entity'"]=D["Entity'"]||{};F=y.Text=y.Text||{};G=F["Utterance'"]=F["Utterance'"]||{};H=F["Intent'"]=F["Intent'"]||{};I=F["Entity'"]=F["Entity'"]||{};J=F["Trait'"]=F["Trait'"]||{};K=y.Domain=y.Domain||{};L=a.StartupCode$Chad_Web$NLU=a.StartupCode$Chad_Web$NLU||{};M=c.Knowledge=c.Knowledge||{};N=M.EmotionalTrait=M.EmotionalTrait||{};O=M.BehavioralTrait=M.BehavioralTrait||{};P=M.Relation=M.Relation||{};Q=M.Triple=M.Triple||{};R=M.Subject=M.Subject||{};S=M.Verb=M.Verb||{};T=M.Object=M.Object||{};U=M.ExpertAIEntity=M.ExpertAIEntity||{};V=M.ExpertAILemma=M.ExpertAILemma||{};W=M.WritingJournlEntry=M.WritingJournlEntry||{};X=c.CUI=c.CUI||{};Y=X.MicState=X.MicState||{};Z=X.ClientState=X.ClientState||{};_0=X.Interpreter=X.Interpreter||{};_1=X.CUI=X.CUI||{};_2=c.Dialogue=c.Dialogue||{};_3=c.Question=c.Question||{};_4=c.QuestionType=c.QuestionType||{};_5=c.DialogueModule=c.DialogueModule||{};_6=c.QuestionDialogs=c.QuestionDialogs||{};_7=c.Questions=c.Questions||{};_8=c.Symptoms=c.Symptoms||{};_9=a.StartupCode$Chad_Web$Symptoms=a.StartupCode$Chad_Web$Symptoms||{};_=c.Journal=c.Journal||{};$=a.StartupCode$Chad_Web$Journal=a.StartupCode$Chad_Web$Journal||{};ba=c.Tests=c.Tests||{};bb=a.StartupCode$Chad_Web$Tests=a.StartupCode$Chad_Web$Tests||{};bc=c.Accounting=c.Accounting||{};bd=a.StartupCode$Chad_Web$Accounting=a.StartupCode$Chad_Web$Accounting||{};be=c.User=c.User||{};bf=a.StartupCode$Chad_Web$User=a.StartupCode$Chad_Web$User||{};bg=c.Main=c.Main||{};bh=a.StartupCode$Chad_Web$Main=a.StartupCode$Chad_Web$Main||{};bi=c.Client=c.Client||{};bj=a.StartupCode$Chad_Web$Client=a.StartupCode$Chad_Web$Client||{};bk=a.Chad$Web_GeneratedPrintf=a.Chad$Web_GeneratedPrintf||{};bl=a.GeneratedPrintf=a.GeneratedPrintf||{};bm=a.WebSharper;bn=bm&&bm.Strings;bo=bm&&bm.Arrays;bp=a.SweetAlert;bq=a.IntelliFactory;br=bq&&bq.Runtime;bs=bm&&bm.Operators;bt=bm&&bm.UI;bu=bt&&bt.Doc;bv=bt&&bt.AttrProxy;bw=bt&&bt.Client;bx=bw&&bw.Templates;by=bm&&bm.Utils;bz=a.console;bA=a.jQuery;bB=bm&&bm.Random;bC=bm&&bm.List;bD=bt&&bt.AttrModule;bE=bm&&bm.Concurrency;bF=bm&&bm.Seq;bG=bm&&bm.JavaScript;bH=bG&&bG.Pervasives;bI=bm&&bm.Numeric;bJ=bm&&bm.ClientSideJson;bK=bJ&&bJ.Provider;bL=a.JSON;bM=bm&&bm.Collections;bN=bM&&bM.Map;bO=a.SDK;bP=bm&&bm.Unchecked;bQ=a.Date;bR=bm&&bm.Remoting;bS=bR&&bR.AjaxRemotingProvider;bT=a.Math;bU=a.Wit;bV=a.document;bW=bM&&bM.Dictionary;d.DebugEntities=function(bX){return bn.StartsWith(bX,"debug-entities ")?{$:1,$0:bn.Replace(bX,"debug-entities ","")}:null;};d.Debug=function(bX){return bX==="debug"?{$:1,$0:null}:null;};d.What=function(bX){return bX==="what is this?"?{$:1,$0:null}:null;};e.getCameraCanvas=function(){return a.getCameraCanvas();};e.stopCamera=function(){return a.stopCamera();};e.startCamera=function(bX,bY){return a.startCamera(bX,bY);};e.speechSynthesis=function(){return a.speechSynthesis;};e.lastMicData=function(){return a.lastMicData;};e.Terminal=function(){return a.$("#term").terminal();};e.enableTerminal=function(){return a.$("#term").terminal().enable();};e.disableTerminal=function(){return a.$("#term").terminal().disable();};e.shuffleArray=function(bX){bo.iteri(function(bY){return e.swap(bX,bY,e.rnd().Next(bY,bX.length));},bX);return bX;};e.swap=function(bX,bY,bZ){var b0;b0=bo.get(bX,bY);bo.set(bX,bY,bo.get(bX,bZ));bo.set(bX,bZ,b0);};e.boxesWithTitles=function(bX){return bo.map(function(bY){var bZ;bZ={};bZ.titleText=bY;return bZ;},bX);};e.confirmQuestionBox=function(){bp.clickConfirm();};e.questionBox=function(bX,bY,bZ,b0,b1,b2,b3){var b4,b5,b6,b7,b8,b9;b4=(b5=b0==null?(b6={},b6.titleText=bX,b6.text=bY,b6.icon="question",b6.html="<div></div>",b6.allowOutsideClick=false,b6):(b7=b0.$0[0],(b8={},b8.titleText=bX,b8.text=bY,b8.icon="question",b8.width=a.String(b7),b8.html=(((br.Curried3(function(b_,b$,ca){return b_("<div class=\"swal2-content-custom\" style=\"width:"+a.String(b$)+"px;height:"+a.String(ca)+"px\"></div>");}))(a.id))(b7))(b0.$0[1]),b8.allowOutsideClick=false,b8)),(b1!=null?b1.$0(b5):void 0,bZ!=null&&bZ.$==1?(b9=bZ.$0,(b5.progressSteps=bo.ofSeq(bs.range(1,bo.length(b9))),bp.mixin(b5).queue(bo.create(bo.length(b9),b5)))):bp.fire(b5)));if(b2!=null)b2.$0();b4.then(b3);};f.get_QueueBoxes=function(){var bX;bX=bp.mixin({});return function(bY){return bX.queue(bY);};};e.getDialogueBoxInput=function(){return bo.get(a.jQuery(".swal2-input").get(),0);};e.getDialogueBoxCanvas=function(){return bo.get(a.jQuery("canvas.swal2-content").get(),0);};e.getDialogueBoxContent=function(){return bo.get(a.jQuery("#swal2-content").get(),0).firstChild;};e.createDialogueBoxCanvas=function(){return e.createCanvas("camera","640","480",bo.get(a.jQuery("#swal2-content").get(),0).firstChild);};e.createCanvas=function(bX,bY,bZ,b0){var b1;b1=bu.Element("canvas",[e.eid(bX),bv.Create("width",bY),bv.Create("height",bZ)],[]);bx.LoadLocalTemplates("");bu.Run(b0,b1);return b0.firstChild;};e.elementHTML=function(bX){return bX.innerHTML;};e.createElement=function(bX){var bY;bY=self.document.createElement("div");self.document.appendChild(bY);bx.LoadLocalTemplates("");bu.RunAppend(bY,bX);};e.getContainer=function(){return bo.get(a.jQuery("#container").get(),0).firstChild;};e.container=function(bX){return bu.Element("div",[e.cls("container")],bX);};e.dindex=function(bX){return bv.Create("data-index",a.String(bX));};e.href=function(bX){return bv.Create("href",bX);};e.cls=function(bX){return bv.Create("class",bX);};e.reid=function(bX){var bY;return e.eid(bX+"-"+(bY=e.rnd().Next$2(),a.String(bY)));};e.eid=function(bX){return bv.Create("id",bX);};e.getMic=function(){return bo.get(a.jQuery("#microphone").get(),0);};e.terminalOutput=function(){return bo.get(a.jQuery(".terminal-output").get(),0);};e.toLower=function(bX){return bX.toLowerCase();};e.debug=function(bX,bY){e.info((((br.Curried3(function(bZ,b0,b1){return bZ("DEBUG: "+by.toSafe(b0)+": "+by.prettyPrint(b1));}))(a.id))(bX.toUpperCase()))(bY));};e.error=function(bX){bz.error(bX);};e.info=function(bX){bz.info(bX);};e.jserror=function(bX){bA.error(bX);};e.toArray=function(bX){return bo.map(a.id,bA.makeArray(bX));};e["Terminal.EchoHtml'"]=function(bX,bY){bX.pause();bX.echo(bY,e.rawOpt());bX.resume();};e["Terminal.Echo'"]=function(bX,bY){bX.pause();bX.echo(bY);bX.resume();};e.rawOpt=function(){g.$cctor();return g.rawOpt;};e.rnd=function(){g.$cctor();return g.rnd;};g.$cctor=function(){var bX;g.$cctor=a.ignore;g.rnd=new bB.New();g.rawOpt=(bX={},bX.raw=true,bX);};h.radio=function(bX,bY,bZ,b0,b1){return bu.Element("div",new bC.T({$:1,$0:e.cls("radio"),$1:bY}),[bu.Element("label",b0,[bu.Radio(b1,true,bZ),bu.TextNode(bX)])]);};h.checkbox=function(bX,bY,bZ,b0,b1){return bu.Element("div",new bC.T({$:1,$0:e.cls("checkbox"),$1:bY}),[bu.Element("label",b0,[bu.CheckBox(b1,bZ),bu.TextNode(bX)])]);};h.textArea=function(bX,bY,bZ,b0,b1){return bu.Element("div",new bC.T({$:1,$0:e.cls("form-group"),$1:bY}),[bu.Element("label",b0,[bu.TextNode(bX)]),bu.InputArea(new bC.T({$:1,$0:e.cls("form-control"),$1:b1}),bZ)]);};h.inputPassword=function(bX,bY,bZ,b0,b1){return bu.Element("div",new bC.T({$:1,$0:e.cls("form-group"),$1:bY}),[bu.Element("label",b0,[bu.TextNode(bX)]),bu.PasswordBox(new bC.T({$:1,$0:e.cls("form-control"),$1:b1}),bZ)]);};h.input=function(bX,bY,bZ,b0,b1){return bu.Element("div",new bC.T({$:1,$0:e.cls("form-group"),$1:bY}),[bu.Element("label",b0,[bu.TextNode(bX)]),bu.Input([e.cls("form-control"),b1],bZ)]);};h.btnSecondaryDropdown=function(bX,bY,bZ){return h.btnDropdown("btn-secondary",bX,bY,bZ);};h.btnPrimaryDropdown=function(bX,bY,bZ){return h.btnDropdown("btn-primary",bX,bY,bZ);};h.btnDropdown=function(bX,bY,bZ,b0){var b1,b2,b3;b1="btndropdown"+"-"+(b2=e.rnd().Next$2(),a.String(b2));b3=bv.Create("id",b1);return bu.Element("div",[e.cls("btn-group dropright")],[bu.Element("button",[b3,e.cls(h.btncls()+" "+bX+" "+"dropdown-toggle"),bv.Create("type","button"),bv.Create("data-toggle","dropdown"),bv.Create("aria-haspopup","true"),bv.Create("aria-expanded","false")],[bu.TextNode(bY)]),bu.Element("div",[e.cls("dropdown-menu"),bv.Create("aria-labelledby",b1)],bC.mapi(function(b4,b5){return bu.Element("a",[e.cls("dropdown-item"),e.href("#"),bD.Handler("click",b0.get_Item(b4))],[bu.TextNode(b5)]);},bZ))]);};h.btnDark=function(bX,bY){return h.btn("btn-dark",bX,bY);};h.btnLight=function(bX,bY){return h.btn("btn-light",bX,bY);};h.btnInfo=function(bX,bY){return h.btn("btn-info",bX,bY);};h.btnWarning=function(bX,bY){return h.btn("btn-warning",bX,bY);};h.btnDanger=function(bX,bY){return h.btn("btn-danger",bX,bY);};h.btnSuccess=function(bX,bY){return h.btn("btn-success",bX,bY);};h.btnSecondary=function(bX,bY){return h.btn("btn-secondary",bX,bY);};h.btnPrimary=function(bX,bY){return h.btn("btn-primary",bX,bY);};h.btn=function(bX,bY,bZ){return bu.Element("button",[e.reid("btn"),e.cls(h.btncls()+" "+bX),bD.Handler("click",bZ)],[bu.TextNode(bY)]);};h.btncls=function(){i.$cctor();return i.btncls;};i.$cctor=function(){i.$cctor=a.ignore;i.btncls=bA(self).width()<=479?"btn btn-sm":"btn";};j.New=function(bX,bY,bZ,b0,b1,b2,b3,b4){return{namespace:bX,goal:bY,first:bZ,min:b0,max:b1,speed:b2,easing:b3,numberCallback:b4};};m.New=function(bX,bY,bZ,b0){return{text:bX,intents:bY,entities:bZ,traits:b0};};n.New=function(bX,bY,bZ){return{id:bX,name:bY,confidence:bZ};};o.New=function(bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7){return{id:bX,name:bY,role:bZ,start:b0,end:b1,body:b2,confidence:b3,entities:b4,suggested:b5,value:b6,type:b7};};p.New=function(bX,bY,bZ){return{id:bX,value:bY,confidence:bZ};};q.New=function(bX){return{intent:bX};};r.New=function(bX){return{value:bX};};l.getMeaning2=function(bX,bY){function bZ(b0,b1){var b2;bA.ajax((b2={},b2.url=(function(b3){return function(b4){return b3("https://api.wit.ai/message?q="+by.toSafe(b4));};}(a.id))(bY),b2.type="GET",b2.beforeSend=function(b3){return b3.setRequestHeader("Authorization","Bearer "+bX);},b2.success=function(b3){return b0(b3);},b2.error=function(b3){return b1(new a.Error(b3.responseText));},b2));}return bE.FromContinuations(function(b0,b1,b2){return bZ.apply(null,[b0,b1,b2]);});};l.getMeaning=function(bX,bY,bZ,b0){var b1;bA.ajax((b1={},b1.url=(function(b2){return function(b3){return b2("https://api.wit.ai/message?q="+by.toSafe(b3));};}(a.id))(bY),b1.type="GET",b1.beforeSend=function(b2){return b2.setRequestHeader("Authorization","Bearer "+bX);},b1.success=bZ,b1.error=b0,b1));};t.New=function(bX,bY,bZ,b0,b1,b2,b3,b4,b5){return{tokenFragment:bX,charFragment:bY,babelSynsetID:bZ,DBpediaURL:b0,BabelNetURL:b1,score:b2,cohrenceScore:b3,globalScore:b4,source:b5};};u.New=function(bX,bY){return{start:bX,end:bY};};v.New=function(bX,bY){return{start:bX,end:bY};};s.disambiguate=function(bX){function bY(bZ,b0){var b1;bA.ajax((b1={},b1.url=(function(b2){return function(b3){return b2("https://babelfy.io/v1/disambiguate?text="+by.toSafe(b3)+"&lang=EN&extAIDA=true&key=983fc0ec-a6fa-49ef-bd02-203c18aef272");};}(a.id))(bX),b1.type="GET",b1.success=function(b2){return bZ(b2);},b1.error=function(b2){return b0(new a.Error(b2.responseText));},b1));}return bE.FromContinuations(function(bZ,b0,b1){return bY.apply(null,[bZ,b0,b1]);});};w.waitAddPhrases=function(){x.$cctor();return x.waitAddPhrases;};w.waitRetrievePhrases=function(){x.$cctor();return x.waitRetrievePhrases;};w.helpPhrases=function(){x.$cctor();return x.helpPhrases;};w.helloUserPhrases=function(){x.$cctor();return x.helloUserPhrases;};w.helloPhrases=function(){x.$cctor();return x.helloPhrases;};w["getRandomPhrase'"]=function(bX){return w.replace_tok("$0","",bF.nth(w.rng().Next(0,bX.get_Length()),bX));};w.getRandomPhrase=function(bX,bY){return w.replace_tok("$0",bY,bF.nth(w.rng().Next(0,bX.get_Length()),bX));};w.replace_tok=function(bX,bY,bZ){return bn.Replace(bZ,bX,bY);};w.rng=function(){x.$cctor();return x.rng;};x.$cctor=function(){x.$cctor=a.ignore;x.rng=new bB.New();x.helloPhrases=bC.ofArray(["Welcome!","Welcome, my name is Chad.","Welcome to Chad. How can I help?","Hello this is Chad, how can I help?","Hello, I am Chad. How can I help?","Hello, I am Chad. How may I help you now?","I'm Chad. Tell me your name so we can get started."]);x.helloUserPhrases=bC.ofArray(["Hello $0, welcome back.","Welcome $0, nice to see you again.","Hello $0.","Good to see you $0.","Hello $0, nice to see you."]);x.helpPhrases=bC.ofArray(["What can I help you with $0?"]);x.waitRetrievePhrases=bC.ofArray(["Ok, let me check that $0 for you","Please wait while I check that $0 for you.","Wait while I check that $0.","Ok let me see if I can find that $0."]);x.waitAddPhrases=bC.ofArray(["Ok, let me add that $0 for you","Please wait while I add that $0 for you.","Wait while I add that $0.","I'll add that $0 now."]);};z=y.Intent=br.Class({toString:function(){return(((br.Curried3(function(bX,bY,bZ){return bX("Intent("+by.toSafe(bY)+", "+bk.p$16(bZ)+")");}))(a.id))(this.get_Name()))(this.get_Confidence());},get_Confidence:function(){return this.$1;},get_Name:function(){return this.$0;}},null,z);A=y.Trait=br.Class({toString:function(){return(((br.Curried3(function(bX,bY,bZ){return bX("Trait("+by.toSafe(bY)+", "+by.prettyPrint(bZ)+")");}))(a.id))(this.get_Name()))(this.get_Value());},get_Confidence:function(){return this.$2;},get_Value:function(){return this.$1;},get_Name:function(){return this.$0;}},null,A);B=y.Entity=br.Class({toString:function(){return(((((br.Curried(function(bX,bY,bZ,b0,b1){return bX("Entity("+by.toSafe(bY)+", "+by.toSafe(bZ)+", "+by.toSafe(b0)+", "+bk.p$16(b1)+")");},5))(a.id))(this.get_Name()))(this.get_Role()))(this.get_Value()))(this.get_Confidence());},get_Confidence:function(){return this.$3;},get_Value:function(){return this.$2;},get_Role:function(){return this.$1;},get_Name:function(){return this.$0;}},null,B);C=y.Utterance=br.Class({toString:function(){return((((br.Curried(function(bX,bY,bZ,b0){return bX(bk.p$14(bY)+" "+bk.p$17(bZ)+" "+bk.p$19(b0));},4))(a.id))(this.get_Intent()))(this.get_Traits()))(this.get_Entities());},get_Entities:function(){var bX;bX=this.$3;return bX!=null?{$:1,$0:bC.sortBy(function(bY){return bY.get_Name();},bX.$0)}:null;},get_Traits:function(){var bX;bX=this.$2;return bX!=null?{$:1,$0:bC.sortBy(function(bY){return bY.get_Name();},bX.$0)}:null;},get_Intent:function(){return this.$1;},get_Text:function(){return this.$0;}},null,C);E.New=function(bX,bY,bZ,b0,b1){return{body:bX,end:bY,start:bZ,suggested:b0,value:b1};};D["Intent'"]=function(bX,bY){return!(bY.intent==null)?{$:1,$0:new z({$:0,$0:e.toLower(bY.intent.value),$1:null})}:null;};D["Trait'"]=function(bX){return!(bX.domain==null)?{$:1,$0:new A({$:0,$0:"domain",$1:e.toLower(bX.domain.value),$2:null})}:!(bX.dialogue_act==null)?{$:1,$0:new A({$:0,$0:"dialogue_act",$1:e.toLower(bX.dialogue_act.value),$2:null})}:null;};D["Entity'$1"]=function(bX){return!(bX.contact==null)?{$:1,$0:new B({$:0,$0:"contact",$1:"",$2:e.toLower(bX.contact.value),$3:null})}:null;};G=F["Utterance'"]=br.Class({get_TopIntent:function(){return bC.head(bC.sortBy(function(bX){return bX.get_Confidence();},this.get_Intents()));},get_Traits:function(){return this.$3;},get_Entities:function(){return this.$2;},get_Intents:function(){return this.$1;},get_Text:function(){return this.$0;}},null,G);H=F["Intent'"]=br.Class({get_Confidence:function(){return this.$1;},get_Name:function(){return this.$0;}},null,H);I=F["Entity'"]=br.Class({get_Value:function(){return(this.get_Unwrap())[3];},get_Role:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2,this.$3];}},null,I);J=F["Trait'"]=br.Class({get_Value:function(){return(this.get_Unwrap())[2];},get_Confidence:function(){return(this.get_Unwrap())[1];},get_Name:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1,this.$2];}},null,J);F.HasUtterance=function(bX){var bY,bZ,b0,b1,b2,b3;return bX!=null&&bX.$==1&&(bX.$0.$2.get_Length()>0&&(bY=[bX.$0.$2,bX.$0.$1,bX,bX.$0.$0,bX.$0.$3],true))?(bZ=bY[0],(b0=bY[2],(b1=bY[4],(b2=bY[1].$==0?null:{$:1,$0:new z({$:0,$0:b0.$0.get_TopIntent().get_Name(),$1:{$:1,$0:b0.$0.get_TopIntent().get_Confidence()}})},(b3=bZ.$==0?null:{$:1,$0:bC.map(function(b4){return new B({$:0,$0:b4.get_Name(),$1:e.toLower(b4.get_Role()),$2:b4.get_Value(),$3:{$:1,$0:b4.get_Confidence()}});},bC.filter(function(b4){return b4.get_Confidence()>F.entityConfidenceThreshold();},bZ))},{$:1,$0:new C({$:0,$0:bY[3],$1:b2,$2:b1.$==0?null:{$:1,$0:bC.map(function(b4){return new A({$:0,$0:e.toLower(b4.get_Name()),$1:b4.get_Value(),$2:{$:1,$0:b4.get_Confidence()}});},bC.filter(function(b4){return b4.get_Confidence()>F.entityConfidenceThreshold();},b1))},$3:b3})}))))):null;};F.entityConfidenceThreshold=function(){L.$cctor();return L.entityConfidenceThreshold;};F.set_entityConfidenceThreshold=function(bX){L.$cctor();L.entityConfidenceThreshold=bX;};F.intentConfidenceThreshold=function(){L.$cctor();return L.intentConfidenceThreshold;};F.set_intentConfidenceThreshold=function(bX){L.$cctor();L.intentConfidenceThreshold=bX;};F.getUtterance=function(bX,bY){l.getMeaning("AR6WFBX5MP46GIRF6S22HZLZ5I4I5UDW",bX,function(bZ){var b0,b1,b2;e.debug("NLU",(function(b3){return function(b4){return b3("Wit.ai returned: "+by.prettyPrint(b4));};}(a.id))(bZ));b0=!(bZ.intents==null)?bC.ofArray(bo.map(function(b3){return new H({$:0,$0:b3.name,$1:b3.confidence});},bZ.intents)):bC.T.Empty;b1=!(bZ.traits==null)?bC.ofSeq(bF.concat(bC.map(function(b3){return bo.map(function(b4){return new J({$:0,$0:b3,$1:b4.confidence,$2:b4.value});},bH.GetJS(bZ.traits,[b3]));},bC.filter(function(b3){return!(bH.GetJS(bZ.traits,[b3])==null);},F.trait_types())))):bC.T.Empty;b2=new G({$:0,$0:bX,$1:b0,$2:!(bZ.entities==null)?bC.ofSeq(bF.concat(bC.map(function(b3){return bo.map(function(b4){return new I({$:0,$0:b4.name,$1:b4.confidence,$2:b4.role,$3:b4.value});},bH.GetJS(bZ.entities,[b3]));},bC.filter(function(b3){return!(bH.GetJS(bZ.entities,[b3])==null);},F.entity_types())))):bC.T.Empty,$3:b1});e.debug("NLU",(function(b3){return function(b4){return b3("Utterance: "+bk.p$23(b4)+" ");};}(a.id))(b2));return bY({$:1,$0:b2});},function(bZ,b0,b1){e.error((((br.Curried3(function(b2,b3,b4){return b2("Wit.ai returned: "+by.prettyPrint(b3)+" "+by.prettyPrint(b4));}))(a.id))(b0))(b1));return bY(null);});};F.trait_types=function(){L.$cctor();return L.trait_types;};F.entity_types=function(){L.$cctor();return L.entity_types;};F.create_account_entity_types=function(){L.$cctor();return L.create_account_entity_types;};F.local_search_query_entity_types=function(){L.$cctor();return L.local_search_query_entity_types;};F.datetime_entity_types=function(){L.$cctor();return L.datetime_entity_types;};F.contact_entity_types=function(){L.$cctor();return L.contact_entity_types;};F.agenda_entry_entity_types=function(){L.$cctor();return L.agenda_entry_entity_types;};F.QuickAccounts=function(bX){return bX==="accounts"?{$:1,$0:new C({$:0,$0:"accounts",$1:{$:1,$0:new z({$:0,$0:"accounts",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};F.JournalEntry=function(bX){var bY;return bn.StartsWith(bX,"journal ")&&bn.Replace(bX,"journal ","")!==""?(bY=bn.Replace(bX,"journal ",""),{$:1,$0:new C({$:0,$0:"journal",$1:{$:1,$0:new z({$:0,$0:"journal",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bC.ofArray([new B({$:0,$0:"journal_entry",$1:"",$2:bY,$3:{$:1,$0:1}})])}})}):null;};F.QuickJournal=function(bX){var bY;return bX==="journal"||bX==="diary"?{$:1,$0:new C({$:0,$0:"journal",$1:{$:1,$0:new z({$:0,$0:"journal",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};F.QuickNumber=function(bX){var bY,bZ,b0,b1,b2,b3;return(bZ=F.One(bX),bZ!=null&&bZ.$==1?(bY=bZ.$0,true):(b0=F.Two(bX),b0!=null&&b0.$==1?(bY=b0.$0,true):(b1=F.Three(bX),b1!=null&&b1.$==1?(bY=b1.$0,true):(b2=F.Four(bX),b2!=null&&b2.$==1?(bY=b2.$0,true):(b3=F.Five(bX),b3!=null&&b3.$==1&&(bY=b3.$0,true))))))?{$:1,$0:bY}:null;};F.Five=function(bX){var bY;return bX==="5"||bX==="five"?{$:1,$0:new C({$:0,$0:"five",$1:{$:1,$0:new z({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bC.ofArray([new B({$:0,$0:"wit/ordinal",$1:"",$2:"five",$3:{$:1,$0:1}})])}})}:null;};F.Four=function(bX){var bY;return bX==="4"||bX==="four"?{$:1,$0:new C({$:0,$0:"four",$1:{$:1,$0:new z({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bC.ofArray([new B({$:0,$0:"wit/ordinal",$1:"",$2:"four",$3:{$:1,$0:1}})])}})}:null;};F.Three=function(bX){var bY;return bX==="3"||bX==="three"?{$:1,$0:new C({$:0,$0:"three",$1:{$:1,$0:new z({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bC.ofArray([new B({$:0,$0:"wit/ordinal",$1:"",$2:"three",$3:{$:1,$0:1}})])}})}:null;};F.Two=function(bX){var bY;return bX==="2"||bX==="two"?{$:1,$0:new C({$:0,$0:"two",$1:{$:1,$0:new z({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bC.ofArray([new B({$:0,$0:"wit/ordinal",$1:"",$2:"two",$3:{$:1,$0:1}})])}})}:null;};F.One=function(bX){var bY;return bX==="1"||bX==="one"?{$:1,$0:new C({$:0,$0:"one",$1:{$:1,$0:new z({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bC.ofArray([new B({$:0,$0:"wit/ordinal",$1:"",$2:"one",$3:{$:1,$0:1}})])}})}:null;};F.QuickNo=function(bX){var bY;return bX==="no"||(bX==="nope"||(bX==="no way"||(bX==="nah"||(bX==="don't do it"||bX==="stop"))))?{$:1,$0:new C({$:0,$0:"no",$1:{$:1,$0:new z({$:0,$0:"reject",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};F.QuickYes=function(bX){var bY;return bX==="yes"||(bX==="ok"||(bX==="sure"||(bX==="yeah"||(bX==="yep"||(bX==="uh huh"||(bX==="go ahead"||bX==="go"))))))?{$:1,$0:new C({$:0,$0:"yes",$1:{$:1,$0:new z({$:0,$0:"verify",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};F.QuickHelp=function(bX){var bY;return bX==="help"||(bX==="help me"||(bX==="what's this?"||bX==="huh"))?{$:1,$0:new C({$:0,$0:"help",$1:{$:1,$0:new z({$:0,$0:"help",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};F.QuickHello=function(bX){var bY;return bX==="hello"||(bX==="hey"||(bX==="yo"||bX==="hi"))?{$:1,$0:new C({$:0,$0:"hello",$1:{$:1,$0:new z({$:0,$0:"greet",$1:{$:1,$0:1}})},$2:null,$3:null})}:null;};F.Voices=function(bX){return bX==="voices"?{$:1,$0:null}:null;};F.DebugEntry=function(bX){return bn.StartsWith(bX,"debug-entry ")?{$:1,$0:bn.Replace(bX,"debug-entry ","")}:null;};F.DebugBehavioralTraits=function(bX){return bn.StartsWith(bX,"debug-bt ")?{$:1,$0:bn.Replace(bX,"debug-bt ","")}:null;};F.DebugEmotionalTraits=function(bX){return bn.StartsWith(bX,"debug-et ")?{$:1,$0:bn.Replace(bX,"debug-et ","")}:null;};F.DebugTriples=function(bX){return bn.StartsWith(bX,"debug-triples ")?{$:1,$0:bn.Replace(bX,"debug-triples ","")}:null;};F.DebugLemmas=function(bX){return bn.StartsWith(bX,"debug-lemmas ")?{$:1,$0:bn.Replace(bX,"debug-lemmas ","")}:null;};F.DebugEntities=function(bX){return bn.StartsWith(bX,"debug-entities ")?{$:1,$0:bn.Replace(bX,"debug-entities ","")}:null;};F.Debug=function(bX){return bX==="debug"?{$:1,$0:null}:null;};F.Blank=function(bX){return bX===""?{$:1,$0:null}:null;};K.Study=function(bX){return bX.get_Traits()!=null?{$:0,$0:null}:{$:1,$0:null};};y.Number=function(bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd;return(bZ=y.Intent_("1",bX),bZ!=null&&bZ.$==1&&(bZ.$0[0]==null&&(bZ.$0[1]==null&&(bY=bX,true))))?{$:1,$0:bI.ParseInt32(bY.get_Intent().$0.get_Name())}:(b1=y.Intent_("2",bX),b1!=null&&b1.$==1&&(b1.$0[0]==null&&(b1.$0[1]==null&&(b0=bX,true))))?{$:1,$0:bI.ParseInt32(b0.get_Intent().$0.get_Name())}:(b3=y.Intent_("3",bX),b3!=null&&b3.$==1&&(b3.$0[0]==null&&(b3.$0[1]==null&&(b2=bX,true))))?{$:1,$0:bI.ParseInt32(b2.get_Intent().$0.get_Name())}:(b5=y.Intent_("4",bX),b5!=null&&b5.$==1&&(b5.$0[0]==null&&(b5.$0[1]==null&&(b4=bX,true))))?{$:1,$0:bI.ParseInt32(b4.get_Intent().$0.get_Name())}:(b7=y.Intent_("5",bX),b7!=null&&b7.$==1&&(b7.$0[0]==null&&(b7.$0[1]==null&&(b6=bX,true))))?{$:1,$0:bI.ParseInt32(b6.get_Intent().$0.get_Name())}:(b9=y.Intent_("6",bX),b9!=null&&b9.$==1&&(b9.$0[0]==null&&(b9.$0[1]==null&&(b8=bX,true))))?{$:1,$0:bI.ParseInt32(b8.get_Intent().$0.get_Name())}:(b$=y.Intent_("7",bX),b$!=null&&b$.$==1&&(b$.$0[0]==null&&(b$.$0[1]==null&&(b_=bX,true))))?{$:1,$0:bI.ParseInt32(b_.get_Intent().$0.get_Name())}:(cb=y.Intent_("8",bX),cb!=null&&cb.$==1&&(cb.$0[0]==null&&(cb.$0[1]==null&&(ca=bX,true))))?{$:1,$0:bI.ParseInt32(ca.get_Intent().$0.get_Name())}:(cd=y.Intent_("9",bX),cd!=null&&cd.$==1&&(cd.$0[0]==null&&(cd.$0[1]==null&&(cc=bX,true))))?{$:1,$0:bI.ParseInt32(cc.get_Intent().$0.get_Name())}:null;};y.StrA=function(bX){if(bX!=null&&bX.$==1)try{return{$:1,$0:((bK.DecodeArray(bK.Id()))())(bL.parse(bX.$0))};}catch(bY){return null;}else return null;};y.PStr=function(bX){var bY;return bX!=null&&bX.$==1&&(typeof bX.$0=="string"&&(bY=bX.$0,true))?{$:1,$0:bY}:null;};y.No=function(bX){var bY,bZ;return(bZ=y.Intent_("reject",bX),bZ!=null&&bZ.$==1&&(bZ.$0[0]==null&&(bZ.$0[1]==null&&(bY=bX,true))))?{$:1,$0:bY}:null;};y.Yes=function(bX){var bY,bZ;return(bZ=y.Intent_("verify",bX),bZ!=null&&bZ.$==1&&(bZ.$0[0]==null&&(bZ.$0[1]==null&&(bY=bX,true))))?{$:1,$0:bY}:null;};y.EntityManyofMany=function(bX,bY){return{$:1,$0:bN.OfArray(bo.ofSeq(bC.map(function(bZ){return bC.exists(function(b0){return b0.get_Role()===bZ;},bY)?[bZ,{$:1,$0:bC.filter(function(b0){return b0.get_Role()===bZ;},bY)}]:[bZ,null];},bX)))};};y.EntityManyOf1=function(bX,bY){var bZ;return bY!=null&&bY.$==1&&(bC.exists(function(b0){return b0.get_Role()===bX;},bY.$0)&&(bZ=bY.$0,true))?{$:1,$0:bC.filter(function(b0){return b0.get_Role()===bX;},bZ)}:null;};y.Entity1OfAny=function(bX,bY){var bZ;return bY!=null&&bY.$==1&&(bC.exists(function(b0){return b0.get_Role()===bX;},bY.$0)&&(bZ=bY.$0,true))?{$:1,$0:bC.head(bC.sortBy(function(b0){return b0.get_Role();},bC.filter(function(b0){return b0.get_Role()===bX;},bZ)))}:null;};y.Entity1Of1=function(bX,bY){var bZ,b0;return bY!=null&&bY.$==1&&(bY.$0.$==1&&(bY.$0.$1.$==0&&((b0=bY.$0.$0,b0.get_Role()===bX||b0.get_Name()===bX)&&(bZ=bY.$0.$0,true))))?{$:1,$0:bZ}:null;};y.Intent_=function(bX,bY){return bY.get_Intent()!=null&&bY.get_Intent().$0.get_Name()===bX?{$:1,$0:[bY.get_Traits(),bY.get_Entities()]}:null;};y.quick_number=function(bX){return new C({$:0,$0:"",$1:{$:1,$0:new z({$:0,$0:"questionresponse",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bC.ofArray([new B({$:0,$0:"wit/ordinal",$1:"",$2:a.String(bX),$3:{$:1,$0:1}})])}});};y.quick_utter=function(bX){return new C({$:0,$0:"",$1:{$:1,$0:new z({$:0,$0:bX,$1:{$:1,$0:1}})},$2:null,$3:null});};L.$cctor=function(){L.$cctor=a.ignore;L.agenda_entry_entity_types=bC.ofArray(["wit$agenda_entry:agenda_entry"]);L.contact_entity_types=bC.ofArray(["wit$contact:contact","wit$contact:query_param_name"]);L.datetime_entity_types=bC.ofArray(["wit$datetime:datetime","wit$datetime:query_param_date"]);L.local_search_query_entity_types=bC.ofArray(["wit$local_search_query:local_search_query","wit$datetime:query_resource"]);L.create_account_entity_types=bC.ofArray(["account_name:account_name","account_type:account_type","account_parent:account_parent"]);L.entity_types=bC.append(F.agenda_entry_entity_types(),bC.append(F.contact_entity_types(),bC.append(F.datetime_entity_types(),bC.append(F.local_search_query_entity_types(),F.create_account_entity_types()))));L.trait_types=bC.ofArray(["domain","speech_act"]);L.intentConfidenceThreshold=0.85;L.entityConfidenceThreshold=0.7;};N=M.EmotionalTrait=br.Class({get_Frequency:function(){return this.$2;},get_Hierarchy:function(){return this.$1;},get_Label:function(){return this.$0;}},null,N);O=M.BehavioralTrait=br.Class({get_Frequency:function(){return this.$2;},get_Hierarchy:function(){return this.$1;},get_Label:function(){return this.$0;}},null,O);P=M.Relation=br.Class({toString:function(){return((((br.Curried(function(bX,bY,bZ,b0){return bX("("+by.prettyPrint(bY)+", "+by.prettyPrint(bZ)+", "+by.prettyPrint(b0)+")");},4))(a.id))(this.get_T1()))(this.get_Name()))(this.get_T2());},get_T2:function(){return this.$2;},get_Name:function(){return this.$1;},get_T1:function(){return this.$0;}},null,P);Q=M.Triple=br.Class({toString:function(){return((((br.Curried(function(bX,bY,bZ,b0){return bX("("+bk.p$5(bY)+", "+bk.p$7(bZ)+", "+bk.p$21(b0)+")");},4))(a.id))(this.get_Subject()))(this.get_Verb()))(this.get_Object());},get_Object:function(){var bX;bX=this.$1;return bX!=null?{$:1,$0:bX.$0.get_T2()}:null;},get_Verb:function(){return this.$0.get_T2();},get_Subject:function(){return this.$0.get_T1();}},null,Q);R=M.Subject=br.Class({toString:function(){return this.$==1?a.String(this.$0):this.$0;}},null,R);S=M.Verb=br.Class({toString:function(){return this.$0;}},null,S);T=M.Object=br.Class({toString:function(){return this.$==1?a.String(this.$0):this.$0;}},null,T);U=M.ExpertAIEntity=br.Class({get_Relevance:function(){return this.$3;},get_Positions:function(){return this.$2;},get_Lemma:function(){return this.$1;},get_Type:function(){return this.$0;}},null,U);V=M.ExpertAILemma=br.Class({get_Positions:function(){return this.$2;},get_Score:function(){return this.$1;},get_Value:function(){return this.$0;}},null,V);W.New=function(bX,bY,bZ,b0,b1,b2,b3,b4,b5){return{UserName:bX,Date:bY,WritingPrompt:bZ,Text:b0,KnowledgeTriples:b1,KnowledgeLemmas:b2,KnowledgeEntities:b3,KnowledgeBehaviouralTraits:b4,KnowledgeEmotionalTraits:b5};};M.ExpertAIEntity1OfAnyType=function(bX,bY){return bY==null?null:bF.tryPick(function(bZ){var b0;return(b0=M.ExpertAIEntityType(bX,bZ.$0),b0!=null&&b0.$==1)?{$:1,$0:bZ}:null;},bY.$0);};M.EmotionalTrait1OfAny=function(bX,bY){return bF.tryPick(function(bZ){var b0;return(b0=M.EmotionalTraitLabel(bX,bZ.$0),b0!=null&&b0.$==1)?{$:1,$0:bZ}:null;},bY);};M.SubjectVerbObject1OfAny=function(bX,bY,bZ,b0,b1,b2){return b2==null?null:bF.tryPick(function(b3){var b4,b5,b6,b7,b8,b9,b_,b$;return(b5=M.TripleSubject(bX,b3.$0.$0),b5!=null&&b5.$==1)&&((b6=M.TripleRelation(bY,b3.$0.$1),b6!=null&&b6.$==1)&&((b7=M.TripleVerb(bZ,b3.$0.$2),b7!=null&&b7.$==1)&&((b8=b3.$1,b8!=null&&b8.$==1)&&((b9=M.TripleVerb(bZ,b3.$1.$0.$0),b9!=null&&b9.$==1)&&((b_=M.TripleRelation(b0,b3.$1.$0.$1),b_!=null&&b_.$==1)&&(b$=M.TripleObject(b1,b3.$1.$0.$2),b$!=null&&b$.$==1))))))?{$:1,$0:b3}:null;},b2.$0);};M.SubjectVerb1OfAny=function(bX,bY,bZ,b0){return b0==null?null:bF.tryPick(function(b1){var b2,b3,b4,b5;return(b3=M.TripleSubject(bX,b1.$0.$0),b3!=null&&b3.$==1)&&((b4=M.TripleRelation(bY,b1.$0.$1),b4!=null&&b4.$==1)&&(b5=M.TripleVerb(bZ,b1.$0.$2),b5!=null&&b5.$==1))?{$:1,$0:b1}:null;},b0.$0);};M.EmotionalTraitLabel=function(bX,bY){return bY.toUpperCase()===bX.toUpperCase()?{$:1,$0:null}:null;};M.ExpertAIEntityType=function(bX,bY){return bY.toUpperCase()===bX.toUpperCase()?{$:1,$0:null}:null;};M.TripleObject=function(bX,bY){var bZ;return bY.$==0&&(bY.$0.toUpperCase()===bX.toUpperCase()&&(bZ=bY.$0,true))?{$:1,$0:null}:null;};M.TripleVerb=function(bX,bY){return bY.$0.toUpperCase()===bX.toUpperCase()?{$:1,$0:null}:null;};M.TripleRelation=function(bX,bY){return bY.toUpperCase()===bX.toUpperCase()?{$:1,$0:null}:null;};M.TripleSubject=function(bX,bY){var bZ;return bY.$==0&&(bY.$0.toUpperCase()===bX.toUpperCase()&&(bZ=bY.$0,true))?{$:1,$0:null}:null;};Y.MicReady={$:5};Y.MicAudioEnd={$:4};Y.MicAudioStart={$:3};Y.MicDisconnected={$:2};Y.MicConnecting={$:1};Y.MicNotInitialized={$:0};Z.ClientUnderstand={$:2};Z.ClientReady={$:1};Z.ClientNotInitialzed={$:0};_0=X.Interpreter=br.Class({get_Options:function(){return(this.get_Unwrap())[2];},get_Text:function(){return(this.get_Unwrap())[1];},get_Voice:function(){return(this.get_Unwrap())[0];},get_Unwrap:function(){return[this.$0,this.$1[0],this.$1[1]];}},null,_0);_1=X.CUI=br.Class({ListMenuItems:function(bX,bY){var bZ,b0;bZ=(b0=bC.max(bC.map(function(b1){return b1.length;},bX)),(function(b1){return function(b2){return b1("width:"+a.String(b2)+"em");};}(a.id))(b0));this.EchoDoc(bu.Element("div",[e.cls("list-group"),bv.Create("style",bZ)],bC.mapi(function(b1,b2){var b3;b3=a.String(b1+1);return bu.Element("a",[e.cls("list-group-item list-group-item-action"),e.href("javascript:;"),bv.HandlerImpl("click",function(){return function(){return bY(b3,b3);};})],[bu.Element("span",[e.cls("badge bg-light rounded-pill")],[bu.TextNode(b3)]),bu.TextNode(b2)]);},bX)));},SayVoices:function(){var bX,bY,bZ;bX=this;bY=a.speechSynthesis.getVoices();if(!(bY==null)){bZ=e.toArray(bY);bX.Say$1((function(b0){return function(b1){return b0("There are currently "+a.String(b1)+" voices installed on this computer or device.");};}(a.id))(bo.length(bZ)));bo.iteri(function(b0,b1){return bX.Say$1(((((br.Curried(function(b2,b3,b4,b5){return b2("Voice "+a.String(b3)+". Name: "+by.toSafe(b4)+", Local: "+by.prettyPrint(b5)+".");},4))(a.id))(b0))(b1.name))(b1.localService));},bZ);}},Wait:function(bX){this.Wait$1(function(){bE.Start(bX,null);});},Wait$1:function(bX){this["Echo'"]("please wait...");this.Term.pause();bX();this.Term.resume();},sayRandom:function(bX,bY){this.Say$1(w.getRandomPhrase(bX,bY));},SayAngry:function(bX){var bY,bZ;bY=this;bE.Start((bZ=null,bE.Delay(function(){return bE.Combine(a.speechSynthesis.speaking?(a.speechSynthesis.cancel(),bO.chime(),bE.Zero()):bE.Zero(),bE.Delay(function(){a.addMessage(bY.Avatar,bX,"","");bY.Avatar.processMessages(0);return bE.Zero();}));})),null);},EchoDoc:function(bX){var bY,bZ;bo.get(bA(".terminal-output").get(),0).childNodes.length;bY=bu.Element("div",[bv.Create("style","margin-bottom:1em")],[bX]);bZ=e.terminalOutput();bx.LoadLocalTemplates("");bu.RunAppend(bZ,bY);},Say:function(bX){var bY,bZ;function b0(){return a.speechSynthesis;}bY=this;bE.Start((bZ=null,bE.Delay(function(){var b1;b1=b0();return bE.Combine(bE.While(function(){return b1.speaking||b1.pending;},bE.Delay(function(){return bE.Bind(bE.Sleep(1000),function(){return bE.Return(null);});})),bE.Delay(function(){bY.Avatar.addMessage(bC.reduce(function(b2,b3){return b2+b3;},bC.map(function(b2){return b2+" ";},bX)));bY.Avatar.processMessages(0);return bE.Zero();}));})),null);},Say$1:function(bX){var bY,bZ;function b0(){return a.speechSynthesis;}bY=this;bE.Start((bZ=null,bE.Delay(function(){var b1;b1=b0();return bE.Combine(bE.While(function(){return b1.speaking||b1.pending;},bE.Delay(function(){return bE.Bind(bE.Sleep(1000),function(){return bE.Return(null);});})),bE.Delay(function(){bY.Avatar.addMessage(bX);bY.Avatar.processMessages(0);return bE.Zero();}));})),null);},Debug:function(bX,bY){e.debug(bX,bY);},"EchoHtml'":function(bX){var bY,bZ;bY=(bZ={},bZ.raw=true,bZ);this.Term.disable();this.Term.echo(bX,bY);this.Term.enable();},"Echo'":function(bX){this.Term.disable();this.Term.echo(bX);this.Term.enable();}},null,_1);_1.ListMenuItems$106$95=function(bX,bY){return function(){return function(){return(bX(bY))(bY);};};};_1.New=function(bX,bY,bZ,b0,b1,b2,b3){return new _1({Voice:bX,Mic:bY,Term:bZ,Avatar:b0,Caption:b1,AudioHandlers:b2,TypingDNA:b3});};_2=c.Dialogue=br.Class({get_Utterances:function(){return this.$4;},get_Output:function(){return this.$3;},get_DialogueQuestions:function(){return this.$2;},get_Props:function(){return this.$1;},get_Cui:function(){return this.$0;}},null,_2);_3=c.Question=br.Class({toString:function(){return((((br.Curried(function(bX,bY,bZ,b0){return bX("Name: "+by.toSafe(bY)+" Module: "+by.toSafe(bZ)+" Type: "+bk.p$22(b0)+" ");},4))(a.id))(this.get_Name()))(this.get_Module()))(this.get_Type());},get_Target:function(){return this.$4;},get_Params:function(){return this.$3;},get_Type:function(){return this.$2;},get_Module:function(){return this.$1;},get_Name:function(){return this.$0;}},null,_3);_4.ConceptCompletion={$:5};_4.Disjunctive={$:4};_5["Response'_"]=function(bX,bY,bZ){var b0,b1,b2,b3,b4,b5,b6,b7;return(b1=_5.PropNotSet_(bX,"user",bZ),b1!=null&&b1.$==1?(b2=_5.Form(bX,bY,b1.$0),b2!=null&&b2.$==1?(b0=b2.$0,true):(b3=_5.PropNotSet_(bX,"user",bZ),b3!=null&&b3.$==1&&(b4=_5.NotForm(bX,bY,b3.$0),b4!=null&&b4.$==1&&(b0=b4.$0,true)))):(b5=_5.PropNotSet_(bX,"user",bZ),b5!=null&&b5.$==1&&(b6=_5.NotForm(bX,bY,b5.$0),b6!=null&&b6.$==1&&(b0=b6.$0,true))))?(b7=_5.have(bX,bY)?{$:1,$0:_5.prop(bX,bY)}:null,b0.get_Text()!==""?{$:1,$0:[b0,{$:1,$0:b0.get_Text()},b7]}:{$:1,$0:[b0,null,b7]}):null;};_5.Response_=function(bX,bY,bZ){var b0,b1,b2,b3,b4,b5,b6,b7;return(b1=_5.PropSet_(bX,"user",bZ),b1!=null&&b1.$==1?(b2=_5.Form(bX,bY,b1.$0),b2!=null&&b2.$==1?(b0=b2.$0,true):(b3=_5.PropSet_(bX,"user",bZ),b3!=null&&b3.$==1&&(b4=_5.NotForm(bX,bY,b3.$0),b4!=null&&b4.$==1&&(b0=b4.$0,true)))):(b5=_5.PropSet_(bX,"user",bZ),b5!=null&&b5.$==1&&(b6=_5.NotForm(bX,bY,b5.$0),b6!=null&&b6.$==1&&(b0=b6.$0,true))))?(b7=_5.have(bX,bY)?{$:1,$0:_5.prop(bX,bY)}:null,b0.get_Text()!==""?{$:1,$0:[b0,{$:1,$0:b0.get_Text()},b7]}:{$:1,$0:[b0,null,b7]}):null;};_5.NotForm=function(bX,bY,bZ){return bX.get_DialogueQuestions().length>0&&(bX.get_DialogueQuestions())[0].get_Name()===bY&&bZ.get_Text()!==""?{$:1,$0:bZ}:null;};_5.Form=function(bX,bY,bZ){return bX.get_DialogueQuestions().length>0&&(bX.get_DialogueQuestions())[0].get_Name()===bY&&bZ.get_Intent()!=null&&bZ.get_Intent().$0.get_Name()===bY&&bP.Equals(bZ.get_Intent().$0.get_Confidence(),{$:1,$0:1})&&bP.Equals(bZ.get_Traits(),null)&&bP.Equals(bZ.get_Entities(),null)?{$:1,$0:bZ}:null;};_5["Intent'_"]=function(bX,bY,bZ){var b0,b1,b2;return(b1=_5.PropNotSet_(bX,"user",bZ),b1!=null&&b1.$==1&&((b2=b1.$0,b2.get_Intent()!=null&&b2.get_Intent().$0.get_Name()===bY)&&(b0=b1.$0,true)))?{$:1,$0:[b0.get_Traits(),b0.get_Entities()]}:null;};_5.Intent_=function(bX,bY,bZ){var b0,b1,b2;return(b1=_5.PropSet_(bX,"user",bZ),b1!=null&&b1.$==1&&((b2=b1.$0,b2.get_Intent()!=null&&b2.get_Intent().$0.get_Name()===bY)&&(b0=b1.$0,true)))?{$:1,$0:[b0.get_Traits(),b0.get_Entities()]}:null;};_5["User'_"]=function(bX,bY){var bZ,b0;return(b0=_5.PropNotSet_(bX,"user",bY),b0!=null&&b0.$==1&&(bX.get_DialogueQuestions().length===0&&(bZ=b0.$0,true)))?{$:1,$0:bZ}:null;};_5.User_=function(bX,bY){var bZ,b0;return(b0=_5.PropSet_(bX,"user",bY),b0!=null&&b0.$==1&&(bX.get_DialogueQuestions().length===0&&(bZ=b0.$0,true)))?{$:1,$0:bZ}:null;};_5.PropNotSet_=function(bX,bY,bZ){return!_5.have(bX,bY)?{$:1,$0:bZ}:null;};_5.PropSet_=function(bX,bY,bZ){return _5.have(bX,bY)?{$:1,$0:bZ}:null;};_5.Agenda_=function(bX,bY,bZ,b0){return bX.get_DialogueQuestions().length>0&&(bX.get_DialogueQuestions())[0].get_Module()===bZ?{$:1,$0:null}:null;};_5.debugInterpreterEnd=function(bX,bY,bZ){bY(((((br.Curried(function(b0,b1,b2,b3){return b0(by.toSafe(b1)+" ending utterances:"+by.prettyPrint(b2)+", questions: "+by.prettyPrint(b3)+".");},4))(a.id))(bZ))(bX.get_Utterances()))(bX.get_DialogueQuestions()));};_5.debugInterpreterStart=function(bX,bY,bZ){bY(((((br.Curried(function(b0,b1,b2,b3){return b0(by.toSafe(b1)+" starting utterances:"+by.prettyPrint(b2)+", questions: "+by.prettyPrint(b3)+".");},4))(a.id))(bZ))(bX.get_Utterances()))(bX.get_DialogueQuestions()));};_5.frame=function(bX){return bC.ofSeq(bF.take(bX.length>=5?5:bX.length,bX));};_5.didNotUnderstand=function(bX,bY,bZ){bY((function(b0){return function(b1){return b0(by.toSafe(b1)+" interpreter did not understand utterance.");};}(a.id))(bZ));_5.popu(bX,bY);_5.say(bX,"Sorry I didn't understand what you meant.");!_5.have(bX,"user")?_5.say(bX,"You must login to use most functions in Selma."):void 0;};_5["endt'"]=function(bX,bY,bZ){var b0;b0=(bX.get_DialogueQuestions())[0];_5.popu(bX,bY);_5.popq(bX,bY);bY((function(b1){return function(b2){return b1("End turn "+by.toSafe(b2)+".");};}(a.id))(b0.get_Name()));bZ();};_5.endt=function(bX,bY,bZ,b0){_5.popu(bX,bY);_5.popq(bX,bY);_5.have(bX,bZ)?_5.remove(bX,bY,bZ):void 0;bY((function(b1){return function(b2){return b1("End turn "+by.toSafe(b2)+".");};}(a.id))(bZ));b0();};_5.cancel=function(bX,bY,bZ){var b0;b0=(bX.get_DialogueQuestions())[0];if(b0.get_Name()!==bZ)(((br.Curried3(function(b1,b2,b3){return b1(bk.p$27(b2)+" at the top of the stack does not have the name "+by.toSafe(b3)+".");}))(bs.FailWith))(b0))(bZ);_5.popq(bX,bY);bY((function(b1){return function(b2){return b1("Cancel "+bk.p$27(b2)+".");};}(a.id))(b0));};_5["trigger'"]=function(bX,bY,bZ,b0,b1,b2){_5.pushu(bX,bY,new C({$:0,$0:bL.stringify(b1),$1:{$:1,$0:new z({$:0,$0:b0,$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:b2}}));bZ(bX);};_5.trigger=function(bX,bY,bZ,b0,b1){_5.pushu(bX,bY,new C({$:0,$0:bL.stringify(b1),$1:{$:1,$0:new z({$:0,$0:b0,$1:{$:1,$0:1}})},$2:null,$3:null}));bZ(bX);};_5.handle=function(bX,bY,bZ,b0){_5.popu(bX,bY);bY((function(b1){return function(b2){return b1("Handle utterance "+by.toSafe(b2)+".");};}(a.id))(bZ));b0();};_5.dispatch=function(bX,bY,bZ,b0){bY(((((br.Curried(function(b1,b2,b3,b4){return b1("Dispatch to module "+by.toSafe(b2)+" utterances: "+by.prettyPrint(b3)+" questions: "+by.prettyPrint(b4)+".");},4))(a.id))(bZ))(bX.get_Utterances()))(bX.get_DialogueQuestions()));b0(bX);};_5.popq=function(bX,bY){var bZ;bZ=bX.get_DialogueQuestions().shift();bY((function(b0){return function(b1){return b0("Pop "+bk.p$27(b1)+".");};}(a.id))(bZ));};_5.pushq=function(bX,bY,bZ){bX.get_DialogueQuestions().unshift(bZ);bY((function(b0){return function(b1){return b0("Push "+bk.p$27(b1)+".");};}(a.id))(bZ));};_5.popu=function(bX,bY){var bZ;bZ=bX.get_Utterances().shift();bY((function(b0){return function(b1){return b0("Pop "+bk.p$13(b1)+".");};}(a.id))(bZ));};_5.pushu=function(bX,bY,bZ){bY((function(b0){return function(b1){return b0("Push "+bk.p$13(b1)+".");};}(a.id))(bZ));bX.get_Utterances().unshift(bZ);};_5.remove=function(bX,bY,bZ){bY((function(b0){return function(b1){return b0("Remove property "+by.toSafe(b1)+".");};}(a.id))(bZ));bX.get_Props().Remove(bZ);};_5.add=function(bX,bY,bZ,b0){bX.get_Props().Add(bZ,b0);bY((((br.Curried3(function(b1,b2,b3){return b1("Add property "+by.toSafe(b2)+":"+by.prettyPrint(b3)+".");}))(a.id))(bZ))(b0));};_5.prop=function(bX,bY){return bX.get_Props().ContainsKey(bY)?bX.get_Props().get_Item(bY):(function(bZ){return function(b0){return bZ("The "+by.toSafe(b0)+" dialogue property does not exist.");};}(bs.FailWith))(bY);};_5.have=function(bX,bY){return bX.get_Props().ContainsKey(bY);};_5["sayRandom'"]=function(bX,bY){_5.sayRandom(bX,bY,"");};_5.sayRandom=function(bX,bY,bZ){var b0;b0=w.getRandomPhrase(bY,bZ);bX.get_Output().unshift(b0);bX.get_Cui().Say$1(b0);};_5.say=function(bX,bY){bX.get_Output().unshift(bY);_5["say'"](bX,bY);};_5["say'"]=function(bX,bY){bX.get_Cui().Say$1(bY);};_5.echo=function(bX,bY){(bX.get_Cui())["EchoHtml'"](bY);};_6.userAuthenticationDialog=function(bX,bY,bZ,b0){var b1,b2,b3;function b4(b9){_5.say(bX,b9);}function b5(b9){b9.input="text";b9.showCancelButton=true;b9.confirmButtonText="Ok";}function b6(b9){b9.confirmButtonClass="invisible";b9.showCancelButton=true;}function b7(){var b9;b9=e.createDialogueBoxCanvas();e.startCamera(self.document.body,b9);}function b8(b9){var b_,b$;b_=b9[0];b$=b9[1];e.questionBox("Biometric Authentication","",{$:1,$0:e.boxesWithTitles(["2","3"])},{$:1,$0:[640,480]},{$:1,$0:b5},{$:1,$0:b7},function(ca){var cb,cc,cd,ce;if(ca.isConfirmed){cb=bX.get_Cui().TypingDNA.getTypingPattern((cc={},cc.type=1,cc.text=b3,cc.caseSensitive=false,cc));cd=ca.value;ce=e.getCameraCanvas().toDataURL();bY((function(cf){return function(cg){return cf("User image is "+by.toSafe(cg)+"...");};}(a.id))(bn.Substring(ce,0,10)));e.stopCamera();bY((((br.Curried3(function(cf,cg,ch){return cf("User entered typing pattern "+by.toSafe(cg)+" for text "+by.toSafe(ch));}))(a.id))(cb))(cd));cd.toLowerCase()!==b3.toLowerCase()?(b4("Sorry you did not enter the passphrase correctly. Please try again."),b8([b_,b$])):e.questionBox("Biometric Authentication","",null,null,{$:1,$0:b6},{$:1,$0:function(){e.getDialogueBoxContent().appendChild(e.getMic());bX.get_Cui().AudioHandlers.Add("VoiceAuthentication",function(cf){bL.stringify(((bK.Id())())(cf));e.confirmQuestionBox();});}},function(cf){if(!cf.isConfirmed){bX.get_Cui().AudioHandlers.Remove("VoiceAuthentication");b4("OK but you must login for me to help you.");}});}else b4("OK but you must login for me to help you.");});}b1=bZ.get_Target();b2=bZ.get_Name();b3=(function(b9){return function(b_){return b9("Hello my name is "+by.toSafe(b_)+" and I am an administrator");};}(a.id))(b0);b4((function(b9){return function(b_){return b9("Enter the phrase "+by.toSafe(b_)+".");};}(a.id))(b3));b8([0,[]]);};_7.menu=function(bX,bY,bZ,b0,b1,b2){return new _3({$:0,$0:bZ,$1:bY,$2:{$:2,$0:b0,$1:b2},$3:null,$4:function(){(bX.get_Cui())["EchoHtml'"](b1);bX.get_Cui().Say$1(b1);}});};_7.ask=function(bX,bY,bZ){var b0,b1,b2,b3;_5.pushq(bX,bY,bZ);(bZ.get_Target())(bX);b0=bZ.get_Type();if(b0.$==0)_6.userAuthenticationDialog(bX,bY,bZ,b0.$0);else b0.$==1?(b1=b0.$0,b2=b0.$1,bX.get_Cui().EchoDoc(bu.Concat([bu.TextNode("    "),h.btnPrimary("Yes",function(){return function(){bX.get_Cui().Term.enable();return b1();};}),bu.TextNode("     "),h.btnSecondary("No",function(){return function(){bX.get_Cui().Term.enable();return b2();};})])),bX.get_Cui().Term.disable()):b0.$==2?(b3=b0.$1,bX.get_Cui().ListMenuItems(b0.$0,function(b4,b5){return(b3(b4))(b5);}),bX.get_Cui().EchoDoc(bu.Concat([h.btnInfo("Help",function(){return function(){return(b3("help"))("help");};}),bu.TextNode("    "),h.btnSecondary("Cancel",function(){return function(){return(b3("cancel"))("cancel");};})]))):b0.$==3?void 0:void 0;self.scrollTo(0,bs.toInt(self.document.body.scrollHeight));};_8.update=function(bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7;function b8(b_){_5.say(bX,b_);}function b9(b_,b$){return _5.Intent_(bX,b_,b$);}_5.debugInterpreterStart(bX,function(b_){_8.debug(b_);},_8.name());bY=_5.frame(bX.$4);if(bY.$==1&&(b0=y.Yes(bY.$0),b0!=null&&b0.$==1&&((b1=_5.Response_(bX,"painVideo",b0.$0),b1!=null&&b1.$==1)&&bY.$1.$==0)))bX.$0["EchoHtml'"]("<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SkAqOditKN0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>");else bY.$==1&&(b3=b9("medjournal",bY.$0),b3!=null&&b3.$==1&&((b4=b3.$0[1],b4!=null&&b4.$==1)&&(bY.$1.$==0&&(b2=b3.$0[1].$0,true))))?(b8("ok I added that entry to your medication journal."),b8("You should be careful not to take too many painkillers over a short period of time.")):bY.$==1&&(b6=_5.User_(bX,bY.$0),b6!=null&&b6.$==1&&((b7=b9("kbquery",b6.$0),b7!=null&&b7.$==1)&&(bY.$1.$==0&&(b5=b6.$0,true))))?void 0:_5.didNotUnderstand(bX,function(b_){_8.debug(b_);},_8.name());_5.debugInterpreterEnd(bX,function(b_){_8.debug(b_);},_8.name());};_8.debug=function(bX){e.debug(_8.name(),bX);};_8.name=function(){_9.$cctor();return _9.name;};_9.$cctor=function(){_9.$cctor=a.ignore;_9.name="Symptoms";};_.update$241$96=br.Curried3(function(bX,bY,bZ){return(bX("3"))("3");});_.update$239$96=br.Curried3(function(bX,bY,bZ){return(bX("2"))("2");});_.update$237$96=br.Curried3(function(bX,bY,bZ){return(bX("1"))("1");});_.update$199$96=br.Curried3(function(bX,bY,bZ){return(bX("3"))("3");});_.update$197$96=br.Curried3(function(bX,bY,bZ){return(bX("2"))("2");});_.update$195$96=br.Curried3(function(bX,bY,bZ){return(bX("1"))("1");});_.update=function(bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL;function cM(cZ){_5.echo(bX,cZ);}function cN(cZ){_5.say(bX,cZ);}function cO(cZ){bY.EchoDoc(cZ);}function cP(cZ){return _5.prop(bX,cZ);}function cQ(cZ,c0){return _5.add(bX,function(c1){_.debug(c1);},cZ,c0);}function cR(cZ){_.debug(cZ);}function cS(){_5.popu(bX,function(cZ){_.debug(cZ);});}function cT(cZ){_.debug(cZ);}function cU(cZ){_.update(cZ);}function cV(cZ){return _5.User_(bX,cZ);}function cW(cZ,c0){return _5.Intent_(bX,cZ,c0);}function cX(){var cZ,c0,c1,c2,c3,c4,c5,c6,c7;cZ=cP("journalentry_text");c0=cP("journalentry_writingprompt");c1=cP("journalentry_triples");c2=cP("journalentry_mainlemmas");c3=cP("journalentry_entities");c4=cP("journalentry_emotionaltraits");c5=cP("journalentry_behaviouraltraits");cN(a.String(c0));bZ("journalentry_behaviouraltraits");bZ("journalentry_emotionaltraits");bZ("journalentry_entities");bZ("journalentry_mainlemmas");bZ("journalentry_triples");bZ("journalentry_writingprompt");bZ("journalentry_text");bZ("journalentry");c6=W.New("l",bQ.now(),c0,cZ,c1,c2,c3,c5,c4);bE.Start((c7=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.addWritingJournalEntry:948476581",[c6]),function(c8){return c8.$==1?bE.Zero():bE.Zero();});})),null);}function cY(cZ){var c0;c0=null;return bE.Delay(function(){cQ("journalentry_text",cZ);return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getTriples:604286546",[cZ]),function(c1){var c2;return c1.$==1?bE.Return({$:1,$0:c1.$0}):(c2=c1.$0,(_.debug((function(c3){return function(c4){return c3("Got "+a.String(c4)+" sentences from NLU server");};}(a.id))(c2.get_Length())),cQ("journalentry_triples",c2),cM("Triples:"),bE.Combine(bE.For(c2,function(c3){cM((function(c4){return function(c5){return c4("<span style='color:white;background-color:#00FA9A'>"+by.printList(function(c6){return bk.p$3(c6);},c5)+"</span>");};}(a.id))(c3));return bE.Zero();}),bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getMainLemmas:254363423",[cZ]),function(c3){var c4,c5;return c3.$==1?(c4=c3.$0,(_.debug(c4),bE.Return({$:1,$0:c4}))):(c5=c3.$0,bE.Combine(bE.For(c5,function(c6){_.debug((function(c7){return function(c8){return c7(bk.p$2(c8));};}(a.id))(c6));return bE.Zero();}),bE.Delay(function(){cQ("journalentry_mainlemmas",c5);cM("Lemmas:");return bE.Combine(bE.For(c5,function(c6){cM((function(c7){return function(c8){return c7("<span style='color:white;background-color:#FFC0CB'>"+bk.p$2(c8)+"</span>");};}(a.id))(c6));return bE.Zero();}),bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getEntities:-1414011567",[cZ]),function(c6){var c7,c8;return c6.$==1?(c7=c6.$0,(_.debug(c7),bE.Return({$:1,$0:c7}))):(c8=c6.$0,bE.Combine(bE.For(c8,function(c9){_.debug((function(c_){return function(c$){return c_(bk.p$1(c$));};}(a.id))(c9));return bE.Zero();}),bE.Delay(function(){cQ("journalentry_entities",c8);cM("Entities:");return bE.Combine(bE.For(c8,function(c9){cM((function(c_){return function(c$){return c_("<span style='color:white;background-color:#7B68EE'>"+bk.p$1(c$)+"</span>");};}(a.id))(c9));return bE.Zero();}),bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getEmotionalTraits:1894919880",[cZ]),function(c9){var c_,c$;return c9.$==1?(c_=c9.$0,(_.debug(c_),bE.Return({$:1,$0:c_}))):(c$=c9.$0,bE.Combine(bE.For(c$,function(da){_.debug((function(db){return function(dc){return db(bk.p$11(dc));};}(a.id))(da));return bE.Zero();}),bE.Delay(function(){cQ("journalentry_emotionaltraits",c$);cM("Emotional Traits:");return bE.Combine(bE.For(c$,function(da){cM((function(db){return function(dc){return db("<span style='color:white;background-color:#FF4500'>"+bk.p$11(dc)+"</span>");};}(a.id))(da));return bE.Zero();}),bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getBehavioralTraits:-153359710",[cZ]),function(da){var db,dc;return da.$==1?(db=da.$0,(_.debug(db),bE.Return({$:1,$0:db}))):(dc=da.$0,(cQ("journalentry_behaviouraltraits",dc),bE.Combine(bE.For(dc,function(dd){_.debug((function(de){return function(df){return de(bk.p$12(df));};}(a.id))(dd));return bE.Zero();}),bE.Delay(function(){cM("Behavioral Traits:");return bE.Combine(bE.For(dc,function(dd){cM((function(de){return function(df){return de("<span style='color:white;background-color:#FFFF00'>"+bk.p$12(df)+"</span>");};}(a.id))(dd));return bE.Zero();}),bE.Delay(function(){return bE.Return({$:0,$0:null});}));}))));});}));})));});}));})));});}));})));});}))));});});}_5.debugInterpreterStart(bX,function(cZ){_.debug(cZ);},_.name());bY=bX.$0;bZ=function(cZ){_5.remove(bX,cR,cZ);};b0=br.Curried(_5.trigger,2,[bX,cT,cU]);b1=bC.ofArray(["Describe a place that makes me feel fearful or angry.","Something happened in the past week that made me feel angry or upset","I remember this dream I had\ufffd"]);b2=bC.ofArray(["Describe the symptoms you are having right now.","Describe the symptoms you have had for the past month.","Describe any symptoms that your condition causes."]);b3=_5.frame(bX.$4);if(b3.$==1&&(b5=cV(b3.$0),b5!=null&&b5.$==1&&(b6=cW("journal",b5.$0),b6!=null&&b6.$==1&&(b6.$0[1]==null&&b3.$1.$==0)))){cN("Choose one of the following the writing prompts:");bY.Say(b1);cM((function(cZ){return function(c0){return cZ("1. "+by.toSafe(c0));};}(a.id))(b1.get_Item(0)));cM((function(cZ){return function(c0){return cZ("2. "+by.toSafe(c0));};}(a.id))(b1.get_Item(1)));cM((function(cZ){return function(c0){return cZ("3. "+by.toSafe(c0));};}(a.id))(b1.get_Item(2)));cO(bu.Concat([bu.Element("ol",[e.cls("pagination")],[bu.Element("li",[e.cls("page-item")],[bu.Element("a",[e.cls("page-link"),e.href("#"),bv.HandlerImpl("click",function(){return function(){return(b0("1"))("1");};})],[bu.TextNode("1")])]),bu.TextNode("     "),bu.Element("li",[e.cls("page-item")],[bu.Element("a",[e.cls("page-link"),e.href("#"),bv.HandlerImpl("click",function(){return function(){return(b0("2"))("2");};})],[bu.TextNode("2")])]),bu.TextNode("     "),bu.Element("li",[e.cls("page-item")],[bu.Element("a",[e.cls("page-link"),e.href("#"),bv.HandlerImpl("click",function(){return function(){return(b0("3"))("3");};})],[bu.TextNode("3")])])])]));}else b3.$==1&&(b8=cV(b3.$0),b8!=null&&b8.$==1&&(b9=y.Number(b8.$0),b9!=null&&b9.$==1&&(b3.$1.$==1&&(b_=cV(b3.$1.$0),b_!=null&&b_.$==1&&(b$=cW("journal",b_.$0),b$!=null&&b$.$==1&&(b$.$0[1]==null&&(b3.$1.$1.$==0&&(b7=b9.$0,true))))))))?b7<=0||b7>3?cN("Choose a writing prompt from 1 to 3."):(cQ("journalentry",true),cQ("journalentry_writingprompt",b7),cM((function(cZ){return function(c0){return cZ("<span style='color:white;background-color:#7B68EE'>"+by.prettyPrint(c0)+"</span>");};}(a.id))(b1.get_Item(b7-1))),cN("Enter your journal entry and I'll analyze it and add it to your journal.")):b3.$==1&&(cb=cV(b3.$0),cb!=null&&cb.$==1&&(cc=cW("journal",cb.$0),cc!=null&&cc.$==1&&(cd=y.Entity1Of1("journal_entry",cc.$0[1]),cd!=null&&cd.$==1&&(b3.$1.$==1&&(ce=cV(b3.$1.$0),ce!=null&&ce.$==1&&(cf=y.Number(ce.$0),cf!=null&&cf.$==1&&(b3.$1.$1.$==1&&(cg=cV(b3.$1.$1.$0),cg!=null&&cg.$==1&&(ch=cW("journal",cg.$0),ch!=null&&ch.$==1&&(ch.$0[1]==null&&(b3.$1.$1.$1.$==0&&(ca=[cd.$0,cf.$0],true))))))))))))?(ci=ca[0],cS(),bE.Start((cj=null,bE.Delay(function(){cN("Ok let me analyze what you've written and add that to your journal.");return bE.Bind(cY(ci.get_Value()),function(cZ){return cZ.$==1?(cN("Sorry I was not able to add your journal entry. Could you try again? Press the up arrow to return to the text you just wrote."),bE.Zero()):(cS(),cS(),cX(),bE.Zero());});})),null)):b3.$==1&&(cl=cV(b3.$0),cl!=null&&cl.$==1&&(cm=cW("symptom_journal",cl.$0),cm!=null&&cm.$==1&&(cm.$0[1]==null&&b3.$1.$==0)))?(cN("Choose one of the following the writing prompts:"),cM("Choose one of the following the writing prompts for your symptom journal:"),bY.Say(b2),cM((function(cZ){return function(c0){return cZ("1. "+by.toSafe(c0));};}(a.id))(b2.get_Item(0))),cM((function(cZ){return function(c0){return cZ("2. "+by.toSafe(c0));};}(a.id))(b2.get_Item(1))),cM((function(cZ){return function(c0){return cZ("3. "+by.toSafe(c0));};}(a.id))(b2.get_Item(2))),cO(bu.Concat([bu.Element("ol",[e.cls("pagination")],[bu.Element("li",[e.cls("page-item")],[bu.Element("a",[e.cls("page-link"),e.href("#"),bv.HandlerImpl("click",function(){return function(){return(b0("1"))("1");};})],[bu.TextNode("1")])]),bu.TextNode("     "),bu.Element("li",[e.cls("page-item")],[bu.Element("a",[e.cls("page-link"),e.href("#"),bv.HandlerImpl("click",function(){return function(){return(b0("2"))("2");};})],[bu.TextNode("2")])]),bu.TextNode("     "),bu.Element("li",[e.cls("page-item")],[bu.Element("a",[e.cls("page-link"),e.href("#"),bv.HandlerImpl("click",function(){return function(){return(b0("3"))("3");};})],[bu.TextNode("3")])])])]))):b3.$==1&&(co=cV(b3.$0),co!=null&&co.$==1&&(cp=y.Number(co.$0),cp!=null&&cp.$==1&&(b3.$1.$==1&&(cq=cV(b3.$1.$0),cq!=null&&cq.$==1&&(cr=cW("symptom_journal",cq.$0),cr!=null&&cr.$==1&&(cr.$0[1]==null&&(b3.$1.$1.$==0&&(cn=cp.$0,true))))))))?cn<=0||cn>3?cN("Choose a writing prompt from 1 to 3."):(cQ("journalentry",true),cQ("journalentry_writingprompt",cn),cM((function(cZ){return function(c0){return cZ("<span style='color:white;background-color:#7B68EE'>"+by.prettyPrint(c0)+"</span>");};}(a.id))(b2.get_Item(cn-1))),cN("Enter the symptoms you are having and I'll analyze it and add it to your journal.")):b3.$==1&&(ct=cV(b3.$0),ct!=null&&ct.$==1&&(cu=cW("journal",ct.$0),cu!=null&&cu.$==1&&(cv=y.Entity1Of1("journal_entry",cu.$0[1]),cv!=null&&cv.$==1&&(b3.$1.$==1&&(cw=cV(b3.$1.$0),cw!=null&&cw.$==1&&(cx=y.Number(cw.$0),cx!=null&&cx.$==1&&(b3.$1.$1.$==1&&(cy=cV(b3.$1.$1.$0),cy!=null&&cy.$==1&&(cz=cW("symptom_journal",cy.$0),cz!=null&&cz.$==1&&(cz.$0[1]==null&&(b3.$1.$1.$1.$==0&&(cs=[cv.$0,cx.$0],true))))))))))))?(cA=cs[0],cS(),bE.Start((cB=null,bE.Delay(function(){cN("Ok let me analyze your symptoms.");return bE.Bind(cY(cA.get_Value()),function(cZ){return cZ.$==1?(cN("Sorry I was not able to add your journal entry. Could you try again? Press the up arrow to return to the text you just wrote."),bE.Zero()):(cS(),cS(),cX(),bE.Zero());});})),null)):b3.$==1&&(cD=y.Yes(b3.$0),cD!=null&&cD.$==1&&((cE=_5.Response_(bX,"painVideo",cD.$0),cE!=null&&cE.$==1)&&b3.$1.$==0))?bY["EchoHtml'"]("<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/SkAqOditKN0\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"):b3.$==1&&(cG=cV(b3.$0),cG!=null&&cG.$==1&&(cH=cW("medjournal",cG.$0),cH!=null&&cH.$==1&&((cI=cH.$0[1],cI!=null&&cI.$==1)&&(b3.$1.$==0&&(cF=cH.$0[1].$0,true)))))?(cN("ok I added that entry to your medication journal."),cN("You should be careful not to take too many painkillers over a short period of time.")):b3.$==1&&(cK=cV(b3.$0),cK!=null&&cK.$==1&&((cL=cW("kbquery",cK.$0),cL!=null&&cL.$==1)&&(b3.$1.$==0&&(cJ=cK.$0,true))))?void 0:_5.didNotUnderstand(bX,function(cZ){_.debug(cZ);},_.name());_5.debugInterpreterEnd(bX,function(cZ){_.debug(cZ);},_.name());};_.debug=function(bX){e.debug(_.name(),bX);};_.name=function(){$.$cctor();return $.name;};$.$cctor=function(){$.$cctor=a.ignore;$.name="Journal";};ba.update=function(bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5;function c6(di){_5.echo(bX,di);}function c7(di){_5.say(bX,di);}function c8(di){bY.EchoDoc(di);}function c9(di,dj){return _5.add(bX,function(dk){ba.debug(dk);},di,dj);}function c_(){_5.popu(bX,function(di){ba.debug(di);});}function c$(di){ba.debug(di);}function da(di){ba.debug(di);}function db(di){ba.update(di);}function dc(di){ba.debug(di);}function dd(di){ba.debug(di);}function de(di,dj,dk,dl){return _7.menu(bX,"Tests",di,dj,dk,dl);}function df(di,dj){return _5.Intent_(bX,di,dj);}function dg(di,dj){return _5.Response_(bX,di,dj);}function dh(di){ba.debug(di);}_5.debugInterpreterStart(bX,function(di){ba.debug(di);},ba.name());bY=bX.$0;bZ=br.Curried(_5.handle,2,[bX,c$]);b0=br.Curried(_5.trigger,2,[bX,da,db]);b1=br.Curried(_5.endt,2,[bX,dc]);b2=function(di){_7.ask(bX,dd,di);};b3=br.Curried(_5.trigger,2,[bX,dh,function(di){_.update(di);}]);b4=bC.ofArray(["Physical Health Tests","Mental Health Tests","Cognitive Tests","Psychological Tests"]);b5=bC.ofArray(["Bladder Control Scale","Bowel Control Scale","Modified Fatigue Impact Scale","MOS Pain Effects Scale","Sexual Satisfaction Scale"]);b6=bC.ofArray(["Mental Health Inventory","Modified Social Support Survey"]);b7=bC.ofArray(["Perceived Deficits Questionnaire","Paced Auditory Serial Test","Single Digit Modality Test"]);b8=bC.ofArray(["Beck's Depression Inventory"]);b9=bC.ofArray(["\u2540","\u2560","\u2599","\u25ae","\u25b3","\u25c9","\u25e0","\u25f0","\u2593"]);b_=_5.frame(bX.$4);if(b_.$==1&&((ca=df("list_test_categories",b_.$0),ca!=null&&ca.$==1)&&b_.$1.$==0))(bZ("list_test_categories"))(function(){b2(de("menuTestCategories",b4,"Choose one of the test categories from the list.",b0));});else b_.$==1&&(cc=dg("menuTestCategories",b_.$0),cc!=null&&cc.$==1&&((cd=df("cancel",cc.$0[0]),cd!=null&&cd.$==1)&&b_.$1.$==0))?(b1("menuTestCategories"))(function(){c8(bu.Concat([h.btnPrimary("tests",function(){return function(){return(b0("list_test_categories"))("list_test_categories");};}),bu.TextNode("     "),h.btnInfo("help",function(){return function(){return(b0("help"))("help");};})]));}):b_.$==1&&(cf=dg("menuTestCategories",b_.$0),cf!=null&&cf.$==1&&(cg=y.Number(cf.$0[0]),cg!=null&&cg.$==1&&(b_.$1.$==0&&(ce=cg.$0,true))))?(b1("menuTestCategories"))(function(){if(ce===1)b2(de("menuPhysicalHealthTests",b5,"Choose a physical health test from the list.",b0));else if(ce===2)b2(de("menuMentalHealthTests",b6,"Choose a mental health test from the list.",b0));else if(ce===3)b2(de("menuCognitiveTests",b7,"Choose a cognitive test from the list.",b0));else if(ce===4)b2(de("menuPsychologicalTests",b8,"Choose a psychological test from the list.",b0));else c7("Choose one of the test categories to see a list of tests available.");}):b_.$==1&&(ci=dg("menuPhysicalHealthTests",b_.$0),ci!=null&&ci.$==1?(cj=df("cancel",ci.$0[0]),cj!=null&&cj.$==1)?b_.$1.$==0:(ck=dg("menuMentalHealthTests",b_.$0),ck!=null&&ck.$==1?(cl=df("cancel",ck.$0[0]),cl!=null&&cl.$==1)?b_.$1.$==0:(cm=dg("menuCognitiveTests",b_.$0),cm!=null&&cm.$==1?(cn=df("cancel",cm.$0[0]),cn!=null&&cn.$==1)?b_.$1.$==0:(co=dg("menuPsychologicalTests",b_.$0),co!=null&&co.$==1&&((cp=df("cancel",co.$0[0]),cp!=null&&cp.$==1)&&b_.$1.$==0)):(cq=dg("menuPsychologicalTests",b_.$0),cq!=null&&cq.$==1&&((cr=df("cancel",cq.$0[0]),cr!=null&&cr.$==1)&&b_.$1.$==0))):(cs=dg("menuCognitiveTests",b_.$0),cs!=null&&cs.$==1?(ct=df("cancel",cs.$0[0]),ct!=null&&ct.$==1)?b_.$1.$==0:(cu=dg("menuPsychologicalTests",b_.$0),cu!=null&&cu.$==1&&((cv=df("cancel",cu.$0[0]),cv!=null&&cv.$==1)&&b_.$1.$==0)):(cw=dg("menuPsychologicalTests",b_.$0),cw!=null&&cw.$==1&&((cx=df("cancel",cw.$0[0]),cx!=null&&cx.$==1)&&b_.$1.$==0)))):(cy=dg("menuMentalHealthTests",b_.$0),cy!=null&&cy.$==1?(cz=df("cancel",cy.$0[0]),cz!=null&&cz.$==1)?b_.$1.$==0:(cA=dg("menuCognitiveTests",b_.$0),cA!=null&&cA.$==1?(cB=df("cancel",cA.$0[0]),cB!=null&&cB.$==1)?b_.$1.$==0:(cC=dg("menuPsychologicalTests",b_.$0),cC!=null&&cC.$==1&&((cD=df("cancel",cC.$0[0]),cD!=null&&cD.$==1)&&b_.$1.$==0)):(cE=dg("menuPsychologicalTests",b_.$0),cE!=null&&cE.$==1&&((cF=df("cancel",cE.$0[0]),cF!=null&&cF.$==1)&&b_.$1.$==0))):(cG=dg("menuCognitiveTests",b_.$0),cG!=null&&cG.$==1?(cH=df("cancel",cG.$0[0]),cH!=null&&cH.$==1)?b_.$1.$==0:(cI=dg("menuPsychologicalTests",b_.$0),cI!=null&&cI.$==1&&((cJ=df("cancel",cI.$0[0]),cJ!=null&&cJ.$==1)&&b_.$1.$==0)):(cK=dg("menuPsychologicalTests",b_.$0),cK!=null&&cK.$==1&&((cL=df("cancel",cK.$0[0]),cL!=null&&cL.$==1)&&b_.$1.$==0)))))?_5["endt'"](bX,function(di){ba.debug(di);},function(){b2(de("menuTestCategories",b4,"Choose one of the test categories from the list.",b0));}):b_.$==1&&(cN=dg("menuCognitiveTests",b_.$0),cN!=null&&cN.$==1&&(cO=y.Number(cN.$0[0]),cO!=null&&cO.$==1&&(b_.$1.$==0&&(cM=cO.$0,true))))?(b1("menuCognitiveTests"))(function(){if(cM===2){c8(bu.TextNode("    "));c7("You last took this test Monday. You're scheduled to take this test agan this week.");c6("The Paced Auditory Serial Addition Test (PASAT) is a measure of cognitive function that\r\n                          specifically assesses auditory information processing speed and flexibility, as well as calculation ability.");c8(bu.Concat([bu.TextNode("     "),h.btnPrimary("start",function(){return function(){return(b0("start_test_pasat"))("start_test_pasat");};}),bu.TextNode("     "),h.btnInfo("about",function(){return function(){return(b0("about_test_pasat"))("about_test_pasat");};}),bu.TextNode("     "),h.btnDark("my history",function(){return function(){return(b0("history_test_pasat"))("history_test_pasat");};}),bu.TextNode("     "),h.btnSecondary("cancel",function(){return function(){return(b0("cancel"))("cancel");};})]));}else if(cM===3){c8(bu.TextNode("    "));c7("You last took this test Monday. You're scheduled to take this test agan this week.");c6("The Single Digit Modalities Test (SDMT) is a measure of cognitive function that\r\n                          specifically assesses information processing speed and episodic memory.");c8(bu.TextNode("     "));c8(bu.Concat([h.btnPrimary("start",function(){return function(){return(b0("start_test_sdmt"))("start_test_sdmt");};}),bu.TextNode("     "),h.btnInfo("about",function(){return function(){return(b0("about_test_sdmt"))("about_test_sdmt");};}),bu.TextNode("     "),h.btnDark("my history",function(){return function(){return(b0("history_test_sdmt"))("history_test_sdmt");};}),bu.TextNode("     "),h.btnSecondary("cancel",function(){return function(){return(b0("cancel"))("cancel");};})]));}else c7("Choose a cognitive test from the list.");}):b_.$==1&&((cQ=df("start_test_pasat",b_.$0),cQ!=null&&cQ.$==1)&&b_.$1.$==0)?(bZ("start_test_pasat"))(function(){c7("You are going to hear a seriesof single digit numbers that will be presented at the rate of one every 3 seconds. \r\n                                     Listen for the first two numbers, add them up, and tell me your answer. \r\n                                     When you hear the next number, add it to the one you heard right before it. \r\n                                     Continue to add the next number to each preceding one. Remember you are not being asked to give me a running total, but rather the sum of the last two numbers that you heard.");c6("Listen to the instructions and click the Yes button when ready.");b2(new _3({$:0,$0:"verify_start_test_pasat",$1:ba.name(),$2:{$:1,$0:function(){(b0("verify"))("yes");},$1:function(){(b0("reject"))("no");}},$3:null,$4:function(){c7("Are you ready to begin?");c6("Are you ready to begin?");}}));}):b_.$==1&&(cS=y.Yes(b_.$0),cS!=null&&cS.$==1&&((cT=dg("verify_start_test_pasat",cS.$0),cT!=null&&cT.$==1)&&b_.$1.$==0))?(bA("#testprofile").removeClass("invisible"),bA("#testprofile-name").text("PASAT"),bA(self.document.getElementById("#testprofile-timer")).asPieProgress(j.New("pie_progress",0,120,0,120,1200,"linear",function(){var di,dj;di=bs.toInt(bT.floor(this.now/60));dj=bs.toInt(this.now%60);return a.String(di)+": "+(dj>10?a.String(dj):"0"+a.String(dj));})),bA(self.document.getElementById("#testprofile-timer")).asPieProgress("start")):b_.$==1&&((cV=df("start_test_sdmt",b_.$0),cV!=null&&cV.$==1)&&b_.$1.$==0)?(bZ("start_test_sdmt"))(function(){c7("You will see a sequence of 9 symbols. Using the symbol-digit key that you see displayed here, enter the 9 digits that match the symbol according to the key.");c6("Listen to the instructions and click the Yes button when ready.");c8(bu.TextNode("    "));b2(new _3({$:0,$0:"verify_start_test_sdmt",$1:ba.name(),$2:{$:1,$0:function(){(b0("verify"))("yes");},$1:function(){(b0("reject"))("no");}},$3:null,$4:a.ignore}));}):b_.$==1&&(cX=y.Yes(b_.$0),cX!=null&&cX.$==1&&((cY=dg("verify_start_test_sdmt",cX.$0),cY!=null&&cY.$==1)&&b_.$1.$==0))?(b1("verify_start_test_sdmt"))(function(){c9("testentry",true);bA("#testprofile").hasClass("invisible")?bA("#testprofile").removeClass("invisible").addClass("visible"):void 0;c8(bu.Element("table",[e.cls("table table-bordered")],[bu.Element("thead",[],[bu.Element("tr",[],bC.map(function(di){return bu.Element("th",[bv.Create("scope","col"),bv.Create("style","font-size:300%;text-align:center")],[bu.TextNode(di)]);},b9))]),bu.Element("tbody",[],[bu.Element("tr",[],bC.mapi(function(di){return bu.Element("td",[bv.Create("style","font-size:300%;text-align:center")],[bu.TextNode(a.String(di+1))]);},b9))])]));bA(self.document.getElementById("pp1")).asPieProgress(j.New("pie_progress",0,90,0,90,900,"linear",function(){var di,dj;di=bs.toInt(bT.floor(this.now/60));dj=bs.toInt(this.now%60);return a.String(di)+": "+(dj>10?a.String(dj):"0"+a.String(dj));}));c7("You have 90 seconds to complete this round.");c6("Round 1");c8(bu.Element("table",[e.cls("table table-bordered")],[bu.Element("thead",[],[bu.Element("tr",[],bo.map(function(di){return bu.Element("th",[bv.Create("scope","col"),bv.Create("style","font-size:300%;text-align:center")],[bu.TextNode(di)]);},e.shuffleArray(bo.ofList(b9))))])]));c8(bu.Concat([bu.TextNode("    "),h.btnWarning("1",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("2",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("3",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("4",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("5",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("6",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("7",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("8",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("9",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnSuccess("next",function(){return function(){return(b0("next_test_sdmt"))("next_test_sdmt");};}),bu.TextNode("    "),h.btnDanger("stop",function(){return function(){return(b0("stop_test_sdmt"))("stop_test_sdmt");};})]));bA(self.document.getElementById("pp1")).asPieProgress("start");c7("Enter the 9 digits corresponding to the symbols shown.");}):b_.$==1&&((c0=df("r_test_sdmt",b_.$0),c0!=null&&c0.$==1)&&b_.$1.$==0)?(c_(),c6("Round 2"),bA("#testprofile-round").text("Round 2"),c8(bu.Element("table",[e.cls("table table-bordered")],[bu.Element("thead",[],[bu.Element("tr",[],bo.map(function(di){return bu.Element("th",[bv.Create("scope","col"),bv.Create("style","font-size:300%;text-align:center")],[bu.TextNode(di)]);},e.shuffleArray(bo.ofList(b9))))])])),c8(bu.Concat([bu.TextNode("    "),h.btnWarning("1",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("2",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("3",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("4",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("5",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("6",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("7",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("8",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("9",function(){return function(){return(b0("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnSuccess("next",function(){return function(){return(b0("next_test_sdmt"))("next_test_sdmt");};}),bu.TextNode("    "),h.btnDanger("stop",function(){return function(){return(b0("stop_test_sdmt"))("stop_test_sdmt");};})])),c7("Enter the 9 digits corresponding to the symbols shown.")):b_.$==1&&((c2=df("stop_test_sdmt",b_.$0),c2!=null&&c2.$==1)&&b_.$1.$==0)?(c_(),bA(self.document.getElementById("pp1")).asPieProgress("stop"),c8(bu.Concat([h.btnPrimary("knowledge",function(){return function(){return(b0("list_kb_categories"))("list_kb_categories");};}),bu.TextNode("     "),h.btnPrimary("tests",function(){return function(){return(b0("list_test_categories"))("list_test_categories");};}),bu.TextNode("     "),h.btnPrimary("symptoms",function(){return function(){return(b3("symptom_journal"))("symptom_journal");};}),bu.TextNode("     "),h.btnPrimary("mood",function(){return function(){return(b3("mood_journal"))("mood_journal");};}),bu.TextNode("     "),h.btnPrimary("caregiver",function(){return function(){return(b3("caregiver_journal"))("caregiver_journal");};}),bu.TextNode("     "),h.btnSecondary("settings",function(){return function(){return(b0("list_settings_categories"))("list_settings_categories");};}),bu.TextNode("     "),h.btnInfo("help",function(){return function(){return(b0("help"))("help");};})]))):b_.$==1&&((c4=df("query",b_.$0),c4!=null&&c4.$==1)?b_.$1.$==0:(c5=df("medication_journal",b_.$0),c5!=null&&c5.$==1)&&b_.$1.$==0)?_.update(bX):_5.didNotUnderstand(bX,function(di){ba.debug(di);},ba.name());_5.debugInterpreterEnd(bX,function(di){ba.debug(di);},ba.name());};ba.debug=function(bX){e.debug(ba.name(),bX);};ba.name=function(){bb.$cctor();return bb.name;};bb.$cctor=function(){bb.$cctor=a.ignore;bb.name="Tests";};bc.update=function(bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm;function dn(dG){_5.echo(bX,dG);}function _do(dG){_5.say(bX,dG);}function dp(dG){bY.EchoDoc(dG);}function dq(dG){return _5.have(bX,dG);}function dr(dG){return _5.prop(bX,dG);}function ds(dG,dH){return _5.add(bX,function(dI){bc.debug(dI);},dG,dH);}function dt(dG){bc.debug(dG);}function du(){_5.popu(bX,function(dG){bc.debug(dG);});}function dv(dG){bc.debug(dG);}function dw(dG){bc.debug(dG);}function dx(dG){bc.update(dG);}function dy(dG){bc.debug(dG);}function dz(dG){bc.debug(dG);}function dA(dG,dH,dI,dJ){return _7.menu(bX,"Tests",dG,dH,dI,dJ);}function dB(dG,dH){return _5.Intent_(bX,dG,dH);}function dC(dG,dH){return _5.Response_(bX,dG,dH);}function dD(dG){bc.debug(dG);}function dE(){dp(bu.Concat([h.btnPrimary("accounts",function(){return function(){return(b1("list_account_types"))("list_account_types");};}),bu.TextNode("     "),h.btnPrimary("transactions",function(){return function(){return(b1("list_test_categories"))("list_test_categories");};}),bu.TextNode("     "),h.btnPrimary("budgets",function(){return function(){return(b4("symptom_journal"))("symptom_journal");};}),bu.TextNode("     "),h.btnPrimary("reports",function(){return function(){return(b4("mood_journal"))("mood_journal");};}),bu.TextNode("     "),h.btnPrimary("caregiver",function(){return function(){return(b4("caregiver_journal"))("caregiver_journal");};}),bu.TextNode("     "),h.btnSecondary("settings",function(){return function(){return(b1("list_settings_categories"))("list_settings_categories");};}),bu.TextNode("     "),h.btnInfo("help",function(){return function(){return(b1("help"))("help");};})]));}function dF(dG,dH){return dp(bu.Element("div",[e.cls("jumbotron")],[bu.Element("h1",[e.cls("display-4")],[bu.TextNode(dG)]),bu.Element("p",[e.cls("lead")],[bu.TextNode(dH)]),bu.Element("hr",[e.cls("my-4")],[]),h.btnPrimary("balance",function(){return function(){return(b1("account_balance"))("account_balance");};}),bu.TextNode("     "),h.btnPrimary("journal",function(){return function(){return(b1("account_journal"))("account_journal");};}),bu.TextNode("     "),h.btnPrimary("transactions",function(){return function(){return(b1("account_transactions"))("account_transactions");};})]));}_5.debugInterpreterStart(bX,function(dG){bc.debug(dG);},bc.name());bY=bX.$0;bZ=function(dG){_5.remove(bX,dt,dG);};b0=br.Curried(_5.handle,2,[bX,dv]);b1=br.Curried(_5.trigger,2,[bX,dw,dx]);b2=br.Curried(_5.endt,2,[bX,dy]);b3=function(dG){_7.ask(bX,dz,dG);};b4=br.Curried(_5.trigger,2,[bX,dD,function(dG){_.update(dG);}]);b5=bC.ofArray(["Physical Health Tests","Mental Health Tests","Cognitive Tests","Psychological Tests"]);bC.ofArray(["Bladder Control Scale","Bowel Control Scale","Modified Fatigue Impact Scale","MOS Pain Effects Scale","Sexual Satisfaction Scale"]);bC.ofArray(["Mental Health Inventory","Modified Social Support Survey"]);bC.ofArray(["Perceived Deficits Questionnaire","Paced Auditory Serial Test","Single Digit Modality Test"]);bC.ofArray(["Beck's Depression Inventory"]);b6=bC.ofArray(["\u2540","\u2560","\u2599","\u25ae","\u25b3","\u25c9","\u25e0","\u25f0","\u2593"]);b7=(new bS.New()).Sync("Chad.Web:Chad.Web.GnuCash.getaccountTypes:426057875",[]);b8=_5.frame(bX.$4);if(b8.$==1&&(b_=dB("query_txns",b8.$0),b_!=null&&b_.$==1&&(b$=y.Entity1OfAny("account_name",b_.$0[1]),b$!=null&&b$.$==1&&(b8.$1.$==0&&(b$.$0.get_Value()==="checking account"&&(b9=b$.$0,true))))))(b0("query_txns"))(function(){bY["EchoHtml'"]("\r\n                        1.\r\n                        Date: 10/17/2021\r\n                        Description: Salary\r\n                        From: Income:Salary\r\n                        Deposit: $4000\r\n                        <hr>\r\n                        2.\r\n                        Date: 10/17/2021\r\n                        Description: Interest\r\n                        From: Income:Checking Interest\r\n                        Deposit: $4000\r\n                        <hr>\r\n                        3.\r\n                        Date: 10/21/2021\r\n                        Description: Dentist\r\n                        To: Expenses:Medical\r\n                        Deposit: $200\r\n                        <hr>\r\n                        4.\r\n                        Date: 10/24/2021\r\n                        Description: \r\n                        To: Expenses:Pets\r\n                        Deposit: $56\r\n                    ");_do("\r\n                        Here are the last 10 transactions for Bank:Checking Account.\r\n                        1.\r\n                        Date: 10/17/2021\r\n                        Description: Salary\r\n                        From: Income:Salary\r\n                        Deposit: $4000\r\n                        2.\r\n                        Date: 10/17/2021\r\n                        Description: Interest\r\n                        From: Income:Checking Interest\r\n                        Deposit: $4000\r\n                        3.\r\n                        Date: 10/21/2021\r\n                        Description: Dentist\r\n                        To: Expenses:Medical\r\n                        Deposit: $200\r\n                        4.\r\n                        Date: 10/24/2021\r\n                        Description: \r\n                        To: Expenses:Pets\r\n                        Deposit: $56\r\n                    ");});else b8.$==1&&((cb=dB("create_budget",b8.$0),cb!=null&&cb.$==1)&&b8.$1.$==0)?(b0("create_budget"))(function(){_do("Ok I added a weekly budget of $50 to Expenses:Pets.");dn("Ok I added a weekly budget of $50 to Expenses:Pets.");}):b8.$==1&&(cd=dB("create_txn",b8.$0),cd!=null&&cd.$==1&&(ce=y.EntityManyOf1("account_name",cd.$0[1]),ce!=null&&ce.$==1&&(b8.$1.$==0&&(cc=ce.$0,true))))?(b0("create_txn"))(function(){_do("Ok I added a withdrawal to Expenses:Pets of $56 from Bank:Checking Account on 10/24/2021.");dn("Ok I added a withdrawal to Expenses:Pets of $56 from Bank:Checking Account on 10/24/2021.");_do("You've exceeded the weekly budget of $50 you set for this account.");bY["EchoHtml'"]("<span color:'purple'>You've exceeded the weekly budget of $50 you set for this account.</span>");}):b8.$==1&&(cg=dB("create_account",b8.$0),cg!=null&&cg.$==1&&(ch=y.Entity1OfAny("account_name",cg.$0[1]),ch!=null&&ch.$==1&&(b8.$1.$==0&&(ch.$0.get_Value()==="pets"&&(cf=ch.$0,true)))))?(b0("create_account"))(function(){_do("OK I created an expense account called Pets");dF("Pets","");}):b8.$==1&&((cj=dB("accounts",b8.$0),cj!=null&&cj.$==1)&&b8.$1.$==0)?(b0("accounts"))(function(){b3(dA("menuAccountTypes",b7,"These are the kinds of accounts that are available. Choose one of the account types from the list.",b1));}):b8.$==1&&(cl=dC("menuAccountTypes",b8.$0),cl!=null&&cl.$==1&&(cm=y.Number(cl.$0[0]),cm!=null&&cm.$==1&&(b8.$1.$==0&&(ck=cm.$0,true))))?(b2("menuAccountTypes"))(function(){var dG,dH;dG=b7.get_Item(ck-1);if(dq("accountType"))bZ("accountType");ds("accountType",dG);dH=(new bS.New()).Sync("Chad.Web:Chad.Web.GnuCash.getAccountsByCategory:928482710",[dG]);if(dq("accounts"))bZ("accounts");ds("accounts",dH);b3(dA("menuAccounts",bC.map(function(dI){return dI.Name;},dH),"Choose an account from the list. Click on the account name or enter the number of the account.",b1));}):b8.$==1&&(co=dC("menuAccountTypes",b8.$0),co!=null&&co.$==1&&((cp=dB("cancel",co.$0[0]),cp!=null&&cp.$==1)&&b8.$1.$==0))?(b2("menuAccountTypes"))(function(){dE();}):b8.$==1&&(cr=dC("menuAccounts",b8.$0),cr!=null&&cr.$==1&&(cs=y.Number(cr.$0[0]),cs!=null&&cs.$==1&&(b8.$1.$==0&&(cq=cs.$0,true))))?(b2("menuAccounts"))(function(){var dG;dG=dr("accounts").get_Item(cq-1);bc.debug((function(dH){return function(dI){return dH("Selected "+by.toSafe(dI)+".");};}(a.id))(dG.Name));ds("account",dG.Name);dp(bu.Element("div",[e.cls("jumbotron")],[bu.Element("h1",[e.cls("display-4")],[bu.TextNode(dG.Name)]),bu.Element("p",[e.cls("lead")],[bu.TextNode(dG.Description)]),bu.Element("hr",[e.cls("my-4")],[]),h.btnPrimary("balance",function(){return function(){return(b1("account_balance"))("account_balance");};}),bu.TextNode("     "),h.btnPrimary("journal",function(){return function(){return(b1("account_journal"))("account_journal");};}),bu.TextNode("     "),h.btnPrimary("transactions",function(){return function(){return(b1("account_transactions"))("account_transactions");};})]));}):b8.$==1&&(cu=dC("menuAccounts",b8.$0),cu!=null&&cu.$==1&&((cv=dB("cancel",cu.$0[0]),cv!=null&&cv.$==1)&&b8.$1.$==0))?(b2("menuAccounts"))(function(){b3(dA("menuAccountTypes",b7,"These are the kinds of accounts that are available. Choose one of the account types from the list.",b1));}):b8.$==1&&((cx=dB("account_balance",b8.$0),cx!=null&&cx.$==1)&&b8.$1.$==0)?(b0("account_balance"))(function(){var dG;dG=dr("account");bF.find(function(dH){return dH.Name===dG;},dr("accounts"));if(dG==="Checking Account"){_do("The balance on your Checking Account is $3900.");dn("The balance on your Checking Account is $3900.");}}):b8.$==1&&((cz=dB("create_balance",b8.$0),cz!=null&&cz.$==1)&&b8.$1.$==0)?(b0("account_balance"))(function(){var dG;dG=dr("account");bF.find(function(dH){return dH.Name===dG;},dr("accounts"));if(dG==="Checking Account"){_do("The balance on your Checking Account is $3900.");dn("The balance on your Checking Account is $3900.");}}):b8.$==1&&(cB=dC("menuPhysicalHealthTests",b8.$0),cB!=null&&cB.$==1?(cC=dB("cancel",cB.$0[0]),cC!=null&&cC.$==1)?b8.$1.$==0:(cD=dC("menuMentalHealthTests",b8.$0),cD!=null&&cD.$==1?(cE=dB("cancel",cD.$0[0]),cE!=null&&cE.$==1)?b8.$1.$==0:(cF=dC("menuCognitiveTests",b8.$0),cF!=null&&cF.$==1?(cG=dB("cancel",cF.$0[0]),cG!=null&&cG.$==1)?b8.$1.$==0:(cH=dC("menuPsychologicalTests",b8.$0),cH!=null&&cH.$==1&&((cI=dB("cancel",cH.$0[0]),cI!=null&&cI.$==1)&&b8.$1.$==0)):(cJ=dC("menuPsychologicalTests",b8.$0),cJ!=null&&cJ.$==1&&((cK=dB("cancel",cJ.$0[0]),cK!=null&&cK.$==1)&&b8.$1.$==0))):(cL=dC("menuCognitiveTests",b8.$0),cL!=null&&cL.$==1?(cM=dB("cancel",cL.$0[0]),cM!=null&&cM.$==1)?b8.$1.$==0:(cN=dC("menuPsychologicalTests",b8.$0),cN!=null&&cN.$==1&&((cO=dB("cancel",cN.$0[0]),cO!=null&&cO.$==1)&&b8.$1.$==0)):(cP=dC("menuPsychologicalTests",b8.$0),cP!=null&&cP.$==1&&((cQ=dB("cancel",cP.$0[0]),cQ!=null&&cQ.$==1)&&b8.$1.$==0)))):(cR=dC("menuMentalHealthTests",b8.$0),cR!=null&&cR.$==1?(cS=dB("cancel",cR.$0[0]),cS!=null&&cS.$==1)?b8.$1.$==0:(cT=dC("menuCognitiveTests",b8.$0),cT!=null&&cT.$==1?(cU=dB("cancel",cT.$0[0]),cU!=null&&cU.$==1)?b8.$1.$==0:(cV=dC("menuPsychologicalTests",b8.$0),cV!=null&&cV.$==1&&((cW=dB("cancel",cV.$0[0]),cW!=null&&cW.$==1)&&b8.$1.$==0)):(cX=dC("menuPsychologicalTests",b8.$0),cX!=null&&cX.$==1&&((cY=dB("cancel",cX.$0[0]),cY!=null&&cY.$==1)&&b8.$1.$==0))):(cZ=dC("menuCognitiveTests",b8.$0),cZ!=null&&cZ.$==1?(c0=dB("cancel",cZ.$0[0]),c0!=null&&c0.$==1)?b8.$1.$==0:(c1=dC("menuPsychologicalTests",b8.$0),c1!=null&&c1.$==1&&((c2=dB("cancel",c1.$0[0]),c2!=null&&c2.$==1)&&b8.$1.$==0)):(c3=dC("menuPsychologicalTests",b8.$0),c3!=null&&c3.$==1&&((c4=dB("cancel",c3.$0[0]),c4!=null&&c4.$==1)&&b8.$1.$==0)))))?_5["endt'"](bX,function(dG){bc.debug(dG);},function(){b3(dA("menuTestCategories",b5,"Choose one of the test categories from the list.",b1));}):b8.$==1&&(c6=dC("menuCognitiveTests",b8.$0),c6!=null&&c6.$==1&&(c7=y.Number(c6.$0[0]),c7!=null&&c7.$==1&&(b8.$1.$==0&&(c5=c7.$0,true))))?(b2("menuCognitiveTests"))(function(){if(c5===2){dp(bu.TextNode("    "));_do("You last took this test Monday. You're scheduled to take this test agan this week.");dn("The Paced Auditory Serial Addition Test (PASAT) is a measure of cognitive function that\r\n                          specifically assesses auditory information processing speed and flexibility, as well as calculation ability.");dp(bu.Concat([bu.TextNode("     "),h.btnPrimary("start",function(){return function(){return(b1("start_test_pasat"))("start_test_pasat");};}),bu.TextNode("     "),h.btnInfo("about",function(){return function(){return(b1("about_test_pasat"))("about_test_pasat");};}),bu.TextNode("     "),h.btnDark("my history",function(){return function(){return(b1("history_test_pasat"))("history_test_pasat");};}),bu.TextNode("     "),h.btnSecondary("cancel",function(){return function(){return(b1("cancel"))("cancel");};})]));}else if(c5===3){dp(bu.TextNode("    "));_do("You last took this test Monday. You're scheduled to take this test agan this week.");dn("The Single Digit Modalities Test (SDMT) is a measure of cognitive function that\r\n                          specifically assesses information processing speed and episodic memory.");dp(bu.TextNode("     "));dp(bu.Concat([h.btnPrimary("start",function(){return function(){return(b1("start_test_sdmt"))("start_test_sdmt");};}),bu.TextNode("     "),h.btnInfo("about",function(){return function(){return(b1("about_test_sdmt"))("about_test_sdmt");};}),bu.TextNode("     "),h.btnDark("my history",function(){return function(){return(b1("history_test_sdmt"))("history_test_sdmt");};}),bu.TextNode("     "),h.btnSecondary("cancel",function(){return function(){return(b1("cancel"))("cancel");};})]));}else _do("Choose a cognitive test from the list.");}):b8.$==1&&((c9=dB("start_test_pasat",b8.$0),c9!=null&&c9.$==1)&&b8.$1.$==0)?(b0("start_test_pasat"))(function(){_do("You are going to hear a seriesof single digit numbers that will be presented at the rate of one every 3 seconds. \r\n                                     Listen for the first two numbers, add them up, and tell me your answer. \r\n                                     When you hear the next number, add it to the one you heard right before it. \r\n                                     Continue to add the next number to each preceding one. Remember you are not being asked to give me a running total, but rather the sum of the last two numbers that you heard.");dn("Listen to the instructions and click the Yes button when ready.");b3(new _3({$:0,$0:"verify_start_test_pasat",$1:bc.name(),$2:{$:1,$0:function(){(b1("verify"))("yes");},$1:function(){(b1("reject"))("no");}},$3:null,$4:function(){_do("Are you ready to begin?");dn("Are you ready to begin?");}}));}):b8.$==1&&(c$=y.Yes(b8.$0),c$!=null&&c$.$==1&&((da=dC("verify_start_test_pasat",c$.$0),da!=null&&da.$==1)&&b8.$1.$==0))?(bA("#testprofile").removeClass("invisible"),bA("#testprofile-name").text("PASAT"),bA(self.document.getElementById("#testprofile-timer")).asPieProgress(j.New("pie_progress",0,120,0,120,1200,"linear",function(){var dG,dH;dG=bs.toInt(bT.floor(this.now/60));dH=bs.toInt(this.now%60);return a.String(dG)+": "+(dH>10?a.String(dH):"0"+a.String(dH));})),bA(self.document.getElementById("#testprofile-timer")).asPieProgress("start")):b8.$==1&&((dc=dB("start_test_sdmt",b8.$0),dc!=null&&dc.$==1)&&b8.$1.$==0)?(b0("start_test_sdmt"))(function(){_do("You will see a sequence of 9 symbols. Using the symbol-digit key that you see displayed here, enter the 9 digits that match the symbol according to the key.");dn("Listen to the instructions and click the Yes button when ready.");dp(bu.TextNode("    "));b3(new _3({$:0,$0:"verify_start_test_sdmt",$1:bc.name(),$2:{$:1,$0:function(){(b1("verify"))("yes");},$1:function(){(b1("reject"))("no");}},$3:null,$4:a.ignore}));}):b8.$==1&&(de=y.Yes(b8.$0),de!=null&&de.$==1&&((df=dC("verify_start_test_sdmt",de.$0),df!=null&&df.$==1)&&b8.$1.$==0))?(b2("verify_start_test_sdmt"))(function(){ds("testentry",true);bA("#testprofile").hasClass("invisible")?bA("#testprofile").removeClass("invisible").addClass("visible"):void 0;dp(bu.Element("table",[e.cls("table table-bordered")],[bu.Element("thead",[],[bu.Element("tr",[],bC.map(function(dG){return bu.Element("th",[bv.Create("scope","col"),bv.Create("style","font-size:300%;text-align:center")],[bu.TextNode(dG)]);},b6))]),bu.Element("tbody",[],[bu.Element("tr",[],bC.mapi(function(dG){return bu.Element("td",[bv.Create("style","font-size:300%;text-align:center")],[bu.TextNode(a.String(dG+1))]);},b6))])]));bA(self.document.getElementById("pp1")).asPieProgress(j.New("pie_progress",0,90,0,90,900,"linear",function(){var dG,dH;dG=bs.toInt(bT.floor(this.now/60));dH=bs.toInt(this.now%60);return a.String(dG)+": "+(dH>10?a.String(dH):"0"+a.String(dH));}));_do("You have 90 seconds to complete this round.");dn("Round 1");dp(bu.Element("table",[e.cls("table table-bordered")],[bu.Element("thead",[],[bu.Element("tr",[],bo.map(function(dG){return bu.Element("th",[bv.Create("scope","col"),bv.Create("style","font-size:300%;text-align:center")],[bu.TextNode(dG)]);},e.shuffleArray(bo.ofList(b6))))])]));dp(bu.Concat([bu.TextNode("    "),h.btnWarning("1",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("2",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("3",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("4",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("5",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("6",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("7",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("8",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("9",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnSuccess("next",function(){return function(){return(b1("next_test_sdmt"))("next_test_sdmt");};}),bu.TextNode("    "),h.btnDanger("stop",function(){return function(){return(b1("stop_test_sdmt"))("stop_test_sdmt");};})]));bA(self.document.getElementById("pp1")).asPieProgress("start");_do("Enter the 9 digits corresponding to the symbols shown.");}):b8.$==1&&((dh=dB("r_test_sdmt",b8.$0),dh!=null&&dh.$==1)&&b8.$1.$==0)?(du(),dn("Round 2"),bA("#testprofile-round").text("Round 2"),dp(bu.Element("table",[e.cls("table table-bordered")],[bu.Element("thead",[],[bu.Element("tr",[],bo.map(function(dG){return bu.Element("th",[bv.Create("scope","col"),bv.Create("style","font-size:300%;text-align:center")],[bu.TextNode(dG)]);},e.shuffleArray(bo.ofList(b6))))])])),dp(bu.Concat([bu.TextNode("    "),h.btnWarning("1",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("2",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("3",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("4",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("5",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("6",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("7",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("8",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnWarning("9",function(){return function(){return(b1("r_test_sdmt"))("r_test_sdmt");};}),bu.TextNode("    "),h.btnSuccess("next",function(){return function(){return(b1("next_test_sdmt"))("next_test_sdmt");};}),bu.TextNode("    "),h.btnDanger("stop",function(){return function(){return(b1("stop_test_sdmt"))("stop_test_sdmt");};})])),_do("Enter the 9 digits corresponding to the symbols shown.")):b8.$==1&&((dj=dB("stop_test_sdmt",b8.$0),dj!=null&&dj.$==1)&&b8.$1.$==0)?(du(),bA(self.document.getElementById("pp1")).asPieProgress("stop"),dp(bu.Concat([h.btnPrimary("knowledge",function(){return function(){return(b1("list_kb_categories"))("list_kb_categories");};}),bu.TextNode("     "),h.btnPrimary("tests",function(){return function(){return(b1("list_test_categories"))("list_test_categories");};}),bu.TextNode("     "),h.btnPrimary("symptoms",function(){return function(){return(b4("symptom_journal"))("symptom_journal");};}),bu.TextNode("     "),h.btnPrimary("mood",function(){return function(){return(b4("mood_journal"))("mood_journal");};}),bu.TextNode("     "),h.btnPrimary("caregiver",function(){return function(){return(b4("caregiver_journal"))("caregiver_journal");};}),bu.TextNode("     "),h.btnSecondary("settings",function(){return function(){return(b1("list_settings_categories"))("list_settings_categories");};}),bu.TextNode("     "),h.btnInfo("help",function(){return function(){return(b1("help"))("help");};})]))):b8.$==1&&((dl=dB("query",b8.$0),dl!=null&&dl.$==1)?b8.$1.$==0:(dm=dB("medication_journal",b8.$0),dm!=null&&dm.$==1)&&b8.$1.$==0)?_.update(bX):_5.didNotUnderstand(bX,function(dG){bc.debug(dG);},bc.name());_5.debugInterpreterEnd(bX,function(dG){bc.debug(dG);},bc.name());};bc.debug=function(bX){e.debug(bc.name(),bX);};bc.name=function(){bd.$cctor();return bd.name;};bd.$cctor=function(){bd.$cctor=a.ignore;bd.name="Accounting";};be.update=function(bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy;function cz(cQ){_5.say(bX,cQ);}function cA(cQ){bZ.EchoDoc(cQ);}function cB(cQ,cR){return _5.sayRandom(bX,cQ,cR);}function cC(cQ,cR){return _5.add(bX,function(cS){be.debug(cS);},cQ,cR);}function cD(cQ){be.debug(cQ);}function cE(cQ){be.debug(cQ);}function cF(cQ){be.update(cQ);}function cG(cQ){be.debug(cQ);}function cH(cQ){be.debug(cQ);}function cI(cQ,cR){return _5["Intent'_"](bX,cQ,cR);}function cJ(cQ,cR){return _5.Response_(bX,cQ,cR);}function cK(cQ,cR){return _5["Response'_"](bX,cQ,cR);}function cL(cQ){be.debug(cQ);}function cM(cQ){be.debug(cQ);}function cN(cQ){return new _3({$:0,$0:"switchUser",$1:be.name(),$2:{$:1,$0:function(){(b1("verify"))("yes");},$1:function(){(b1("reject"))("no");}},$3:null,$4:function(){cz((function(cR){return function(cS){return cR("Do you want me to switch to the user "+by.toSafe(cS));};}(a.id))(cQ));}});}function cO(cQ){var cR;cB(w.waitRetrievePhrases(),"user name");bE.Start((cR=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getUser:1440988159",[cQ]),function(cS){var cT;return cS==null?(cz((function(cU){return function(cV){return cU("I did not find a user with the name "+by.toSafe(cV)+".");};}(a.id))(cQ)),b3(new _3({$:0,$0:"addUser",$1:be.name(),$2:{$:1,$0:function(){(b1("verify"))("yes");},$1:function(){(b1("reject"))("no");}},$3:null,$4:function(){cC("addUser",cQ);cz((function(cU){return function(cV){return cU("Do you want me to add the user "+by.toSafe(cV)+"?");};}(a.id))(cQ));}})),bE.Zero()):(cT=cS.$0,bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.updateUserLastLogin:-278775852",[cT.Name]),function(){cB(w.helloUserPhrases(),cT.Name);cz("You have 2 new messages.");cC("user",cQ);return bE.Combine(cT.LastLoggedIn!=null?bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.humanize:-359853309",[cT.LastLoggedIn.$0]),function(cU){cz((function(cV){return function(cW){return cV("You last logged in "+by.toSafe(cW)+".");};}(a.id))(cU));return bE.Zero();}):bE.Zero(),bE.Delay(function(){return bE.Combine(bA("#profile").hasClass("invisible")?(bA("#profile").removeClass("invisible").addClass("visible"),bE.Zero()):bE.Zero(),bE.Delay(function(){cA(bu.Concat([h.btnPrimary("accounts",function(){return function(){return(b4("accounts"))("accounts");};}),bu.TextNode("     "),h.btnPrimary("transactions",function(){return function(){return(b4("transactions"))("list_test_categories");};}),bu.TextNode("     "),h.btnPrimary("budgets",function(){return function(){return(b5("symptom_journal"))("symptom_journal");};}),bu.TextNode("     "),h.btnPrimary("reports",function(){return function(){return(b5("mood_journal"))("mood_journal");};}),bu.TextNode("     "),h.btnPrimary("invoices",function(){return function(){return(b5("caregiver_journal"))("caregiver_journal");};}),bu.TextNode("     "),h.btnPrimary("documents",function(){return function(){return(b5("caregiver_journal"))("caregiver_journal");};}),bu.TextNode("     "),h.btnSecondary("settings",function(){return function(){return(b1("list_settings_categories"))("list_settings_categories");};}),bu.TextNode("     "),h.btnInfo("help",function(){return function(){return(b1("help"))("help");};})]));return bE.Zero();}));}));}));});})),null);}function cP(cQ){var cR;bE.Start((cR=null,bE.Delay(function(){cB(w.waitAddPhrases(),"user");return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.addUser:-1045813033",[cQ]),function(cS){return cS.$==1?(e.error((((br.Curried3(function(cT,cU,cV){return cT("Error adding user "+by.toSafe(cU)+":"+by.toSafe(cV)+".");}))(a.id))(cQ))(cS.$0)),cz((function(cT){return function(cU){return cT("Sorry I was not able to add the user "+by.toSafe(cU)+" to the system.");};}(a.id))(cQ)),bE.Zero()):(cC("user",cQ),cC("newuser",true),cz((function(cT){return function(cU){return cT("Hello "+by.prettyPrint(cU)+", nice to meet you.");};}(a.id))(bY.get_Item("user"))),cz("Click on one of the buttons below to get a list of writing prompts."),bE.Zero());});})),null);}_5.debugInterpreterStart(bX,function(cQ){be.debug(cQ);},be.name());bY=bX.$1;bZ=bX.$0;b0=br.Curried(_5.handle,2,[bX,cD]);b1=br.Curried(_5.trigger,2,[bX,cE,cF]);b2=br.Curried(_5.endt,2,[bX,cG]);b3=function(cQ){_7.ask(bX,cH,cQ);};b4=br.Curried(_5.trigger,2,[bX,cL,function(cQ){bc.update(cQ);}]);b5=br.Curried(_5.trigger,2,[bX,cM,function(cQ){_.update(cQ);}]);b6=_5.frame(bX.$4);if(b6.$==1&&(b8=cI("greet",b6.$0),b8!=null&&b8.$==1?(b9=y.Entity1OfAny("name",b8.$0[1]),b9!=null&&b9.$==1?b6.$1.$==0&&(b7=b9.$0,true):(b_=cI("greet",b6.$0),b_!=null&&b_.$==1&&(b$=y.Entity1OfAny("contact",b_.$0[1]),b$!=null&&b$.$==1&&(b6.$1.$==0&&(b7=b$.$0,true))))):(ca=cI("greet",b6.$0),ca!=null&&ca.$==1&&(cb=y.Entity1OfAny("contact",ca.$0[1]),cb!=null&&cb.$==1&&(b6.$1.$==0&&(b7=cb.$0,true))))))(b0("loginUser"))(function(){cO(b7.get_Value());});else b6.$==1&&(cd=cI("hello",b6.$0),cd!=null&&cd.$==1&&(ce=y.Entity1OfAny("contact",cd.$0[1]),ce!=null&&ce.$==1&&(b6.$1.$==0&&(cc=ce.$0,true))))?(b0("loginUser"))(function(){cO(cc.get_Value());}):b6.$==1&&(cg=y.No(b6.$0),cg!=null&&cg.$==1&&(ch=cK("addUser",cg.$0),ch!=null&&ch.$==1&&(ci=y.PStr(ch.$0[2]),ci!=null&&ci.$==1&&(b6.$1.$==0&&(cf=ci.$0,true)))))?(b2("addUser"))(function(){cz((function(cQ){return function(cR){return cQ("Ok I did not add the user "+by.toSafe(cR)+". But you must login for me to help you.");};}(a.id))(cf));}):b6.$==1&&(ck=y.Yes(b6.$0),ck!=null&&ck.$==1&&(cl=cK("addUser",ck.$0),cl!=null&&cl.$==1&&(cm=y.PStr(cl.$0[2]),cm!=null&&cm.$==1&&(b6.$1.$==0&&(cj=cm.$0,true)))))?(b2("addUser"))(function(){cP(cj);}):b6.$==1&&(co=_5.Intent_(bX,"greet",b6.$0),co!=null&&co.$==1&&(co.$0[0]==null&&(cp=y.Entity1Of1("name",co.$0[1]),cp!=null&&cp.$==1&&(b6.$1.$==0&&(cn=cp.$0,true)))))?bE.Start((cq=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getUser:1440988159",[cn.get_Value()]),function(cQ){return cQ==null?(cz((function(cR){return function(cS){return cR("Sorry, the user "+by.toSafe(cS)+" does not exist.");};}(a.id))(cn.get_Value())),bE.Zero()):(b3(cN(cQ.$0.Name)),bE.Zero());});})),null):b6.$==1&&(cs=y.Yes(b6.$0),cs!=null&&cs.$==1&&(ct=cJ("switchUser",cs.$0),ct!=null&&ct.$==1&&(cu=y.PStr(ct.$0[2]),cu!=null&&cu.$==1&&(b6.$1.$==0&&(cr=cu.$0,true)))))?(bY.set_Item("user",cr),_5.have(bX,"newuser")?_5.remove(bX,function(cQ){be.debug(cQ);},"newuser"):void 0,cz((function(cQ){return function(cR){return cQ("Ok I switched to user "+by.prettyPrint(cR)+".");};}(a.id))(cr))):b6.$==1&&(cw=y.No(b6.$0),cw!=null&&cw.$==1&&(cx=cJ("switchUser",cw.$0),cx!=null&&cx.$==1&&(cy=y.PStr(cx.$0[2]),cy!=null&&cy.$==1&&(b6.$1.$==0&&(cv=cy.$0,true)))))?cz((function(cQ){return function(cR){return cQ("Ok I did not switch to user "+by.toSafe(cR)+".");};}(a.id))(cv)):_5.didNotUnderstand(bX,function(cQ){be.debug(cQ);},be.name());_5.debugInterpreterEnd(bX,function(cQ){be.debug(cQ);},be.name());};be.debug=function(bX){e.debug(be.name(),bX);};be.name=function(){bf.$cctor();return bf.name;};bf.$cctor=function(){bf.$cctor=a.ignore;bf.name="User";};bg.update=function(bX){var bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs;function ct(cB){_5.echo(bX,cB);}function cu(cB){_5.say(bX,cB);}function cv(cB){_5["sayRandom'"](bX,cB);}function cw(cB){bg.debug(cB);}function cx(cB){bg.debug(cB);}function cy(cB){bg.debug(cB);}function cz(cB,cC){return _5.Intent_(bX,cB,cC);}function cA(cB,cC){return _5["Intent'_"](bX,cB,cC);}bY=bX.$4;bg.debug(((((br.Curried(function(cB,cC,cD,cE){return cB("Module "+by.toSafe(cC)+" starting utterances:"+by.prettyPrint(cD)+", questions: "+by.prettyPrint(cE)+".");},4))(a.id))(bg.name()))(bY))(bX.$2));bZ=br.Curried(_5.dispatch,2,[bX,cw]);b0=br.Curried(_5.handle,2,[bX,cx]);b1=br.Curried(_5.Agenda_,2,[bX,cy]);b2=_5.frame(bY);b3=(b1(be.name()))(b2);if(b3!=null&&b3.$==1){bg.debug((function(cB){return function(cC){return cB("Agenda is "+bk.p$27(cC)+".");};}(a.id))((bX.get_DialogueQuestions())[0]));be.update(bX);}else{b4=(b1(ba.name()))(b2);b4!=null&&b4.$==1?(bg.debug((function(cB){return function(cC){return cB("Agenda is "+bk.p$27(cC)+".");};}(a.id))((bX.get_DialogueQuestions())[0])),ba.update(bX)):b2.$==1&&((b6=cA("help",b2.$0),b6!=null&&b6.$==1)?b2.$1.$==0:(b7=cz("help",b2.$0),b7!=null&&b7.$==1)&&b2.$1.$==0)?(cu("The following commands are available."),ct("The following commands are available:"),ct("<span style='background-color:blue;color:white'>journal</span> - Show a list of writing prompts"),ct("<span style='background-color:blue;color:white'>debug-journal</span> <text-entry> - Show a set of debug info for a journal entry.")):b2.$==1&&(b9=(b_=_5.PropNotSet_(bX,"started",b2.$0),b_!=null&&b_.$==1?{$:1,$0:b_.$0}:null),b9!=null&&b9.$==1&&(b$=cA("greet",b9.$0),b$!=null&&b$.$==1&&(b$.$0[1]==null&&b2.$1.$==0)))?(_5.add(bX,function(cB){bg.debug(cB);},"started",true),(b0("greet"))(function(){cv(w.helloPhrases());})):b2.$==1&&(cb=cA("greet",b2.$0),cb!=null&&cb.$==1&&(cb.$0[1]==null&&b2.$1.$==0))?(b0("greet"))(function(){cu("Hello, tell me your name to get started.");}):b2.$==1&&(cd=cA("greet",b2.$0),cd!=null&&cd.$==1&&((ce=y.Entity1Of1("name",cd.$0[1]),ce!=null&&ce.$==1)&&b2.$1.$==0))?(bZ(be.name()))(function(cB){be.update(cB);}):b2.$==1&&(cg=cA("hello",b2.$0),cg!=null&&cg.$==1&&((ch=y.Entity1Of1("contact",cg.$0[1]),ch!=null&&ch.$==1)&&b2.$1.$==0))?(bZ(be.name()))(function(cB){be.update(cB);}):b2.$==1&&(cj=cA("greet",b2.$0),cj!=null&&cj.$==1?(ck=y.Entity1OfAny("name",cj.$0[1]),ck!=null&&ck.$==1?b2.$1.$==0&&(ci=ck.$0,true):(cl=cA("greet",b2.$0),cl!=null&&cl.$==1&&(cm=y.Entity1OfAny("contact",cl.$0[1]),cm!=null&&cm.$==1&&(b2.$1.$==0&&(ci=cm.$0,true))))):(cn=cA("greet",b2.$0),cn!=null&&cn.$==1&&(co=y.Entity1OfAny("contact",cn.$0[1]),co!=null&&co.$==1&&(b2.$1.$==0&&(ci=co.$0,true)))))?(bZ(be.name()))(function(cB){be.update(cB);}):b2.$==1&&((cq=cz("journal",b2.$0),cq!=null&&cq.$==1)&&b2.$1.$==0)?(bZ(_.name()))(function(cB){_.update(cB);}):b2.$==1&&(b2.$1.$==0&&((cs=b2.$0,cs.get_Traits()!=null&&bC.exists(function(cB){return cB.get_Name()==="domain"&&cB.get_Value()==="accounting";},cs.get_Traits().$0))&&(cr=b2.$0,true)))?(bZ(bc.name()))(function(cB){bc.update(cB);}):_5.didNotUnderstand(bX,function(cB){bg.debug(cB);},bg.name());}_5.debugInterpreterEnd(bX,function(cB){bg.debug(cB);},bg.name());};bg.debug=function(bX){e.debug(bg.name(),bX);};bg.name=function(){bh.$cctor();return bh.name;};bh.$cctor=function(){bh.$cctor=a.ignore;bh.name="Main";};bi.run=function(){var bX,bY,bZ,b0,b1;function b2(b3){bi.Utterances().unshift(b3);return b0;}bX=(bY=br.ThisFunc(function(b3,b4){return((bi.Main().get_Text())(b3))(b4);}),(bZ=bi.Main().get_Options(),void a.$("#term").terminal(bY,bZ)));bi.set_CUI(_1.New(bi.CUI().Voice,bi.CUI().Mic,bX,bi.CUI().Avatar,bi.CUI().Caption,bi.CUI().AudioHandlers,bi.CUI().TypingDNA));b0=new _2({$:0,$0:bi.CUI(),$1:bi.Props(),$2:bi.Questions(),$3:bi.Output(),$4:bi.Utterances()});b1=bu.Concat([h.btnPrimary("hello",function(){return function(){bi.initMic(bi["main'"]);bi.initSpeech();return bg.update(b2(y.quick_utter("greet")));};}),bu.TextNode("     "),h.btnInfo("help",function(){return function(){bi.initMic(bi["main'"]);bi.initSpeech();return bg.update(b2(y.quick_utter("help")));};})]);bi.CUI().EchoDoc(b1);return bu.get_Empty();};bi.Main=function(){bj.$cctor();return bj.Main;};bi["main'"]=function(bX,bY){var bZ,b0,b1,b2,b3,b4,b5,b6,b7;bZ=new _2({$:0,$0:bi.CUI(),$1:bi.Props(),$2:bi.Questions(),$3:bi.Output(),$4:bi.Utterances()});bi.debug((((br.Curried3(function(b8,b9,b_){return b8("Voice: "+by.prettyPrint(b9)+" "+by.prettyPrint(b_));}))(a.id))(bX))(bY));b0=(b1=D["Intent'"](bX,bY),b1!=null&&b1.$==1?{$:1,$0:b1.$0}:null);b2=(b3=D["Trait'"](bY),b3!=null&&b3.$==1?{$:1,$0:bC.ofArray([b3.$0])}:null);b4=(b5=D["Entity'$1"](bY),b5!=null&&b5.$==1?{$:1,$0:bC.ofArray([b5.$0])}:null);if(b0==null&&(b2==null&&b4==null));else{bi.debug(((((br.Curried(function(b8,b9,b_,b$){return b8("Voice: "+bk.p$14(b9)+" "+bk.p$17(b_)+" "+bk.p$19(b$));},4))(a.id))(b0))(b2))(b4));bg.update((b7=new C({$:0,$0:"",$1:b0,$2:b2,$3:b4}),(bi.Utterances().unshift(b7),bZ)));}};bi.initMic=function(bX){var bY,bZ;bi.set_CUI((bY={$:1,$0:new bU.Microphone(bV.getElementById("microphone"))},_1.New(bi.CUI().Voice,bY,bi.CUI().Term,bi.CUI().Avatar,bi.CUI().Caption,bi.CUI().AudioHandlers,bi.CUI().TypingDNA)));bZ=bi.CUI().Mic.$0;bZ.onconnecting=function(){bi.set_MicState(Y.MicConnecting);return bi.debug("Mic connecting...");};bZ.ondisconnected=function(){bi.set_MicState(Y.MicDisconnected);return bi.debug("Mic disconnected.");};bZ.onaudiostart=function(){bi.set_MicState(Y.MicAudioStart);return bi.debug("Mic audio start...");};bZ.onaudioend=function(){var b0,b1,b2,b3;bi.debug("Mic audio end.");b1=bi.CUI().AudioHandlers;b0=b1.GetEnumerator$1();try{while(b0.MoveNext()){b2=b0.Current();bi.debug((function(b4){return function(b5){return b4("Executing audio handler "+by.toSafe(b5)+".");};}(a.id))(b2.K));bi.set_MicState({$:7,$0:b2.K});b3=b2.V;bi.CUI().AudioHandlers.Remove(b2.K);b3(e.lastMicData());}return;}finally{b0.Dispose();}};bZ.onerror=function(b0){bi.set_MicState({$:6,$0:b0});return bi.debug((function(b1){return function(b2){return b1("Mic error : "+by.toSafe(b2)+".");};}(a.id))(b0));};bZ.onready=function(){bi.set_MicState(Y.MicReady);return bi.debug("Mic ready.");};bZ.onresult=function(b0,b1){return bi.ClientState().$==2?bi.echo("I'm still trying to understand what you said before."):bi.ClientState().$==0?e.error("Client is not intialized."):bi.MicState().$==7?null:!(b0==null||b1==null)?(bi.set_MicState({$:8,$0:b0,$1:b1}),bi.debug((((br.Curried3(function(b2,b3,b4){return b2("Mic result: "+by.prettyPrint(b3)+" "+by.prettyPrint(b4)+".");}))(a.id))(b0))(b1)),bX(b0,b1)):bi.debug("Mic: No result returned.");};bZ.connect("AR6WFBX5MP46GIRF6S22HZLZ5I4I5UDW");};bi.sayRandom=function(bX,bY){bi.say(w.getRandomPhrase(bY,bX));};bi.say=function(bX){bi.Output().unshift(bX);bi["say'"](bX);};bi["say'"]=function(bX){bi.CUI().Say$1(bX);};bi.initSpeech=function(){var bX;bX=e.toArray(bi.synth().getVoices());if(bo.length(bX)>0){bo.iter(function(bY){if(bP.Equals(bi.CUI().Voice,null)&&(bY.name.indexOf("Microsoft Zira")!=-1||bY.name.toLowerCase().indexOf("female")!=-1)){bi.set_CUI(_1.New({$:1,$0:bY},bi.CUI().Mic,bi.CUI().Term,bi.CUI().Avatar,bi.CUI().Caption,bi.CUI().AudioHandlers,bi.CUI().TypingDNA));bi.debug((function(bZ){return function(b0){return bZ("Using browser speech synthesis voice "+by.toSafe(b0)+".");};}(a.id))(bi.CUI().Voice.$0.name));}},bX);!bP.Equals(bi.CUI().Voice,null)?(bi.CUI().Avatar.nativeVoice=true,bi.CUI().Avatar.nativeVoiceName=bi.CUI().Voice.$0.name,bi.debug((function(bY){return function(bZ){return bY("Using browser speech synthesis voice "+by.toSafe(bZ)+".");};}(a.id))(bi.CUI().Voice.$0.name))):void 0;}if(bP.Equals(bi.CUI().Voice,null))bi.debug("No female browser speech synthesis voice is available. Using CMU SLT Female voice via TTS.");};bi.synth=function(){bj.$cctor();return bj.synth;};bi.Utterances=function(){bj.$cctor();return bj.Utterances;};bi.Questions=function(){bj.$cctor();return bj.Questions;};bi.Output=function(){bj.$cctor();return bj.Output;};bi.Props=function(){bj.$cctor();return bj.Props;};bi.wait=function(bX){e["Terminal.Echo'"](bi.CUI().Term,"please wait");bi.CUI().Term.pause();bX();bi.CUI().Term.resume();};bi.debug=function(bX){e.debug("CLIENT",bX);};bi.echo=function(bX){e["Terminal.EchoHtml'"](bi.CUI().Term,(function(bY){return function(bZ){return bY(by.prettyPrint(bZ));};}(a.id))(bX));};bi.cui=function(){return bi.CUI();};bi.ClientState=function(){bj.$cctor();return bj.ClientState;};bi.set_ClientState=function(bX){bj.$cctor();bj.ClientState=bX;};bi.MicState=function(){bj.$cctor();return bj.MicState;};bi.set_MicState=function(bX){bj.$cctor();bj.MicState=bX;};bi.CUI=function(){bj.$cctor();return bj.CUI;};bi.set_CUI=function(bX){bj.$cctor();bj.CUI=bX;};bj.$cctor=function(){var bX,bY,bZ;bj.$cctor=a.ignore;function b0(b1,b2){var b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cv,cw,cx,cy;function cu(cz){bi.Utterances().unshift(cz);return cv;}bi.set_CUI(_1.New(bi.CUI().Voice,bi.CUI().Mic,b1,bi.CUI().Avatar,bi.CUI().Caption,bi.CUI().AudioHandlers,bi.CUI().TypingDNA));if(bP.Equals(bi.CUI().Mic,null))bi.initMic(bi["main'"]);if(bP.Equals(bi.CUI().Voice,null))bi.initSpeech();if(bi.ClientState().$===0)bi.set_ClientState(Z.ClientReady);cv=new _2({$:0,$0:bi.CUI(),$1:bi.Props(),$2:bi.Questions(),$3:bi.Output(),$4:bi.Utterances()});if(cv.get_Props().ContainsKey("journalentry")){bi.debug("Routing input as journal entry.");_.update(cu(new C({$:0,$0:"journal",$1:{$:1,$0:new z({$:0,$0:"journal",$1:{$:1,$0:1}})},$2:null,$3:{$:1,$0:bC.ofArray([new B({$:0,$0:"journal_entry",$1:"",$2:b2,$3:{$:1,$0:1}})])}})));}else if(cv.get_Props().ContainsKey("testentry")){bi.debug("Routing input as test entry.");ba.update(cu(new C({$:0,$0:"r_test_sdmt",$1:{$:1,$0:new z({$:0,$0:"r_test_sdmt",$1:{$:1,$0:1}})},$2:null,$3:null})));}else{cw=F.Blank(b2);if(cw!=null&&cw.$==1)bi["say'"]("Tell me what you want me to do or ask me a question.");else{cx=F.Debug(b2);if(cx!=null&&cx.$==1){bi.debug((function(cz){return function(cA){return cz("Utterances: "+by.prettyPrint(cA));};}(a.id))(bi.Utterances()));bi.debug((function(cz){return function(cA){return cz("Questions: "+by.prettyPrint(cA));};}(a.id))(bi.Questions()));b4=bi.Props().GetEnumerator$1();try{while(b4.MoveNext()){cy=b4.Current();bi.debug((((br.Curried3(function(cz,cA,cB){return cz(by.toSafe(cA)+": "+by.prettyPrint(cB));}))(a.id))(cy.K))(cy.V));}}finally{b4.Dispose();}bi.CUI().Wait((b5=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.GnuCash.getAcccounts:-1212601436",[]),function(cz){return cz==null?bE.Zero():(bi.debug((function(cA){return function(cB){return cA("Accounts: "+by.printList(function(cC){return bl.p(cC);},cB));};}(a.id))(cz.$0)),bE.Zero());});})));}else{b6=F.DebugEntities(b2);b6!=null&&b6.$==1?(b7=b6.$0,bi.CUI().Wait((b8=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getEntities:-1414011567",[b7]),function(cz){var cA;return cz.$==1?(bi.debug(cz.$0),bE.Zero()):(cA=cz.$0,bE.Combine(bE.For(cA,function(cB){bi.debug((function(cC){return function(cD){return cC(bk.p$1(cD));};}(a.id))(cB));return bE.Zero();}),bE.Delay(function(){bi.echo("Entities:");return bE.For(cA,function(cB){bi.echo((function(cC){return function(cD){return cC("<span style='color:white;background-color:#7B68EE'>"+bk.p$1(cD)+"</span>");};}(a.id))(cB));return bE.Zero();});})));});})))):(b9=F.DebugLemmas(b2),b9!=null&&b9.$==1?(b_=b9.$0,bi.CUI().Wait((b$=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getMainLemmas:254363423",[b_]),function(cz){var cA;return cz.$==1?(bi.debug(cz.$0),bE.Zero()):(cA=cz.$0,bE.Combine(bE.For(cA,function(cB){bi.debug((function(cC){return function(cD){return cC(bk.p$2(cD));};}(a.id))(cB));return bE.Zero();}),bE.Delay(function(){bi.echo("Lemmas:");return bE.For(cA,function(cB){bi.echo((function(cC){return function(cD){return cC("<span style='color:white;background-color:#FFC0CB'>"+bk.p$2(cD)+"</span>");};}(a.id))(cB));return bE.Zero();});})));});})))):(ca=F.DebugTriples(b2),ca!=null&&ca.$==1?(cb=ca.$0,bi.CUI().Wait((cc=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getTriples:604286546",[cb]),function(cz){var cA;return cz.$==1?(bi.debug(cz.$0),bE.Zero()):(cA=cz.$0,bE.Combine(bE.For(cA,function(cB){return bE.For(cB,function(cC){bi.debug((function(cD){return function(cE){return cD(bk.p$3(cE));};}(a.id))(cC));return bE.Zero();});}),bE.Delay(function(){bi.echo("Triples:");return bE.For(cA,function(cB){bi.echo((function(cC){return function(cD){return cC("<span style='color:white;background-color:#00FA9A'>"+by.printList(function(cE){return bk.p$3(cE);},cD)+"</span>");};}(a.id))(cB));return bE.Zero();});})));});})))):(cd=F.DebugEmotionalTraits(b2),cd!=null&&cd.$==1?(ce=cd.$0,bi.CUI().Wait((cf=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getEmotionalTraits:1894919880",[ce]),function(cz){var cA;return cz.$==1?(bi.debug(cz.$0),bE.Zero()):(cA=cz.$0,bE.Combine(bE.For(cA,function(cB){bi.debug((function(cC){return function(cD){return cC(bk.p$11(cD));};}(a.id))(cB));return bE.Zero();}),bE.Delay(function(){bi.echo("Emotional Traits:");return bE.For(cA,function(cB){bi.echo((function(cC){return function(cD){return cC("<span style='color:white;background-color:#FF4500'>"+bk.p$11(cD)+"</span>");};}(a.id))(cB));return bE.Zero();});})));});})))):(cg=F.DebugBehavioralTraits(b2),cg!=null&&cg.$==1?(ch=cg.$0,bi.CUI().Wait((ci=null,bE.Delay(function(){return bE.Bind((new bS.New()).Async("Chad.Web:Chad.Web.Server.getBehavioralTraits:-153359710",[ch]),function(cz){var cA;return cz.$==1?(bi.debug(cz.$0),bE.Zero()):(cA=cz.$0,bE.Combine(bE.For(cA,function(cB){bi.debug((function(cC){return function(cD){return cC(bk.p$12(cD));};}(a.id))(cB));return bE.Zero();}),bE.Delay(function(){bi.echo("Behavioral Traits:");return bE.For(cA,function(cB){bi.echo((function(cC){return function(cD){return cC("<span style='color:white;background-color:#FF4500'>"+bk.p$12(cD)+"</span>");};}(a.id))(cB));return bE.Zero();});})));});})))):(cj=F.Voices(b2),cj!=null&&cj.$==1?(ck=e.toArray(e.speechSynthesis().getVoices()),bi["say'"]((function(cz){return function(cA){return cz("There are currently "+a.String(cA)+" voices installed on this computer or device.");};}(a.id))(bo.length(ck))),bo.iteri(function(cz,cA){return bi["say'"](((((br.Curried(function(cB,cC,cD,cE){return cB("Voice "+a.String(cC)+". Name: "+by.toSafe(cD)+", Local: "+by.prettyPrint(cE)+".");},4))(a.id))(cz))(cA.name))(cA.localService));},ck)):bi.ClientState().$==1?(cm=F.QuickHello(b2),(cm!=null&&cm.$==1?(cl=cm.$0,true):(cn=F.QuickHelp(b2),cn!=null&&cn.$==1?(cl=cn.$0,true):(co=F.QuickYes(b2),co!=null&&co.$==1?(cl=co.$0,true):(cp=F.QuickNo(b2),cp!=null&&cp.$==1?(cl=cp.$0,true):(cq=F.QuickNumber(b2),cq!=null&&cq.$==1&&(cl=cq.$0,true))))))?(bi.debug((function(cz){return function(cA){return cz("Quick Text: "+bk.p$13(cA)+".");};}(a.id))(cl)),bg.update(cu(cl)),bi.set_ClientState(Z.ClientReady)):(cr=F.JournalEntry(b2),cr!=null&&cr.$==1?(cs=cr.$0,bi.debug((function(cz){return function(cA){return cz("Journal entry: "+bk.p$13(cA)+".");};}(a.id))(cs)),bg.update(cu(cs)),bi.set_ClientState(Z.ClientReady)):bi.CUI().Wait((ct=null,bE.Delay(function(){bi.set_ClientState(Z.ClientUnderstand);F.getUtterance(b2,function(cz){var cA,cB;cA=F.HasUtterance(cz);if(cA!=null&&cA.$==1){cB=cA.$0;bi.debug(((((br.Curried(function(cC,cD,cE,cF){return cC("Text: Intent: "+bk.p$14(cD)+", Traits: "+bk.p$17(cE)+", Entities: "+bk.p$19(cF)+".");},4))(a.id))(cB.get_Intent()))(cB.get_Traits()))(cB.get_Entities()));bg.update(cu(cB));}else{bi.debug("Text: Did not receive a meaning from the server.");bi["say'"]("Sorry I did not understand what you said.");}});bi.set_ClientState(Z.ClientReady);return bE.Zero();}))))):bi.ClientState().$==0?e.error("Client is not initialized."):bi["say'"]("I'm still trying to understand what you said before."))))));}}}return self.scrollTo(0,bs.toInt(self.document.body.scrollHeight));}bj.CUI=_1.New(null,null,null,(bO.applicationId="4277115329081938617",bX=new a.SDKConnection(),bY=new a.WebAvatar(),bY.version=8.5,bY.connection=bX,bY.avatar="20031372",bY.voice="cmu-slt",bY.voiceMod="default",bY.width=bA(self).width()<=479?90:175,bY.createBox(),bY.addMessage(""),bY.processMessages(0),bY),false,new bW.New$5(),new a.TypingDNA());bj.MicState=Y.MicNotInitialized;bj.ClientState=Z.ClientNotInitialzed;bj.Props=new bW.New$5();bj.Output=[];bj.Questions=[];bj.Utterances=[];bj.synth=a.speechSynthesis;bj.Main=new _0({$:0,$0:function(b1){bi["main'"](b1[0],b1[1]);},$1:[function(b1){return function(b2){return b0(b1,b2);};},(bZ={},bZ.name="Main",bZ.greetings="Welcome to Chad. Enter 'hello' or 'hello my name is...(you) to initialize speech.",bZ.prompt="&#x2328;  ",bZ)]});};bk.p$21=function(bX){return bX==null?"null":"Some "+bk.p$10(bX.$0);};bk.p$22=function(bX){return bX.$==5?"ConceptCompletion":bX.$==4?"Disjunctive":bX.$==3?"WritingPrompt ("+by.printList(by.prettyPrint,bX.$0)+", "+"<fun>"+")":bX.$==2?"Menu ("+by.printList(by.prettyPrint,bX.$0)+", "+"<fun>"+")":bX.$==1?"Verification (<fun>, <fun>)":"UserAuthentication "+by.prettyPrint(bX.$0);};bk.p$23=function(bX){return"Utterance' ("+by.prettyPrint(bX.$0)+", "+by.printList(function(bY){return bk.p$24(bY);},bX.$1)+", "+by.printList(function(bY){return bk.p$25(bY);},bX.$2)+", "+by.printList(function(bY){return bk.p$26(bY);},bX.$3)+")";};bk.p$26=function(bX){return"Trait' ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+by.prettyPrint(bX.$2)+")";};bk.p$25=function(bX){return"Entity' ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+by.prettyPrint(bX.$2)+", "+by.prettyPrint(bX.$3)+")";};bk.p$24=function(bX){return"Intent' ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+")";};bk.p$27=function(bX){return"Question ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+bk.p$22(bX.$2)+", "+bk.p$28(bX.$3)+", "+"<fun>"+")";};bk.p$28=function(bX){return bX==null?"null":"Some "+by.printArray(by.prettyPrint,bX.$0);};bk.p=function(bX){return bX.$==5?"OTHER":bX.$==4?"CASH":bX.$==3?"EXPENSE":bX.$==2?"ASSET":bX.$==1?"INCOME":"BANK";};bl.p=function(bX){return"{"+("Guid = "+by.prettyPrint(bX.Guid))+"; "+("Name = "+by.prettyPrint(bX.Name))+"; "+("Type = "+bk.p(bX.Type))+"; "+("ParentGuid = "+by.prettyPrint(bX.ParentGuid))+"; "+("Description = "+by.prettyPrint(bX.Description))+"}";};bk.p$1=function(bX){return"ExpertAIEntity ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+by.printList(function(bY){return"("+by.prettyPrint(bY[0])+", "+by.prettyPrint(bY[1])+")";},bX.$2)+", "+by.prettyPrint(bX.$3)+")";};bk.p$2=function(bX){return"ExpertAILemma ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+by.printList(function(bY){return"("+by.prettyPrint(bY[0])+", "+by.prettyPrint(bY[1])+")";},bX.$2)+")";};bk.p$6=function(bX){return"Relation ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+by.prettyPrint(bX.$2)+")";};bk.p$5=function(bX){return bX.$==1?"Relation "+bk.p$6(bX.$0):"Subject "+by.prettyPrint(bX.$0);};bk.p$7=function(bX){return"Verb "+by.prettyPrint(bX.$0);};bk.p$4=function(bX){return"Relation ("+bk.p$5(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+bk.p$7(bX.$2)+")";};bk.p$10=function(bX){return bX.$==1?"Relation "+bk.p$6(bX.$0):"Object "+by.prettyPrint(bX.$0);};bk.p$9=function(bX){return"Relation ("+bk.p$7(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+bk.p$10(bX.$2)+")";};bk.p$8=function(bX){return bX==null?"null":"Some "+bk.p$9(bX.$0);};bk.p$3=function(bX){return"Triple ("+bk.p$4(bX.$0)+", "+bk.p$8(bX.$1)+")";};bk.p$11=function(bX){return"EmotionalTrait ("+by.prettyPrint(bX.$0)+", "+by.printList(by.prettyPrint,bX.$1)+", "+by.prettyPrint(bX.$2)+")";};bk.p$12=function(bX){return"BehavioralTrait ("+by.prettyPrint(bX.$0)+", "+by.printList(by.prettyPrint,bX.$1)+", "+by.prettyPrint(bX.$2)+")";};bk.p$16=function(bX){return bX==null?"null":"Some "+by.prettyPrint(bX.$0);};bk.p$15=function(bX){return"Intent ("+by.prettyPrint(bX.$0)+", "+bk.p$16(bX.$1)+")";};bk.p$14=function(bX){return bX==null?"null":"Some "+bk.p$15(bX.$0);};bk.p$18=function(bX){return"Trait ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+bk.p$16(bX.$2)+")";};bk.p$17=function(bX){return bX==null?"null":"Some "+by.printList(function(bY){return bk.p$18(bY);},bX.$0);};bk.p$20=function(bX){return"Entity ("+by.prettyPrint(bX.$0)+", "+by.prettyPrint(bX.$1)+", "+by.prettyPrint(bX.$2)+", "+bk.p$16(bX.$3)+")";};bk.p$19=function(bX){return bX==null?"null":"Some "+by.printList(function(bY){return bk.p$20(bY);},bX.$0);};bk.p$13=function(bX){return"Utterance ("+by.prettyPrint(bX.$0)+", "+bk.p$14(bX.$1)+", "+bk.p$17(bX.$2)+", "+bk.p$19(bX.$3)+")";};}(self));
